<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>PENGTAL MVP</title>
  <style>
    html, body { margin:0; height:100%; background:#0b1220; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:#e8f1ff; }
    #wrap { display:flex; flex-direction:column; height:100%; }

    #topbar{
      padding:10px 12px; display:flex; gap:10px; align-items:center; justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.03);
      flex-wrap: wrap;
    }
    .left { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .pill{ padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.08); font-size:13px; display:flex; align-items:center; gap:8px; }
    .dot { width:10px; height:10px; border-radius:999px; border:2px solid rgba(255,255,255,.28); display:inline-block; }
    button{
      background:rgba(255,255,255,.10); color:#e8f1ff; border:1px solid rgba(255,255,255,.14);
      padding:8px 12px; border-radius:10px; cursor:pointer;
    }
    button:disabled{ opacity:.45; cursor:not-allowed; }
    button:active{ transform: translateY(1px); }

    #game { flex:1; display:flex; align-items:center; justify-content:center; padding:14px; flex-direction:column; gap:10px; }
    canvas { width:min(92vw, 560px); height:min(92vw, 560px); border-radius:16px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10); touch-action:none; }

    /* time line */
    #timeLineWrap{
      width:min(92vw, 560px);
      display:flex;
      align-items:center;
      gap:10px;
      padding:8px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
    }
    #timeLineLabel{ font-size:12px; opacity:.85; white-space:nowrap; }
    #timeLine{
      position:relative;
      flex:1;
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    #timeFill{
      position:absolute; inset:0;
      width:100%;
      background:rgba(160, 220, 255, 0.35);
      transform-origin:left center;
      transform: scaleX(1);
    }
    .mark{
      position:absolute; top:50%;
      width:2px; height:14px;
      transform: translate(-50%, -50%);
      background:rgba(255,255,255,.40);
    }
    .markText{
      position:absolute;
      top:-18px;
      transform: translateX(-50%);
      font-size:11px;
      opacity:.9;
      white-space:nowrap;
    }

    /* toast */
    #msg {
      position:fixed; left:0; right:0; bottom:18px; display:flex; justify-content:center; pointer-events:none;
    }
    #msg > div{
      padding:10px 14px; border-radius:999px; background:rgba(0,0,0,.45); color:#fff; font-size:14px;
      border:1px solid rgba(255,255,255,.15); backdrop-filter: blur(8px);
      opacity:0; transform:translateY(8px); transition: all .18s ease;
    }
    #msg.show > div{ opacity:1; transform:translateY(0); }

    /* overlays */
    .overlay{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(0,0,0,.55); backdrop-filter: blur(6px);
      padding:18px;
      z-index: 50;
    }
    .overlay.show{ display:flex; }
    .card{
      width:min(92vw, 460px);
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(15,20,35,.90);
      padding:16px;
      box-shadow: 0 20px 80px rgba(0,0,0,.45);
    }
    .title{ font-size:18px; font-weight:800; margin:0 0 8px; }
    .desc{ font-size:13px; opacity:.88; margin:0 0 14px; line-height:1.55; }
    .grid{
      display:grid; grid-template-columns: repeat(2, 1fr); gap:10px;
    }
    .bigBtn{
      padding:14px 10px;
      border-radius:14px;
      font-weight:800;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.08);
      text-align:left;
    }
    .tiny{ font-size:12px; opacity:.82; font-weight:600; }
    .row{ display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }
    .rowBetween{ display:flex; gap:10px; justify-content:space-between; margin-top:12px; }
    .centerBig{ font-size:28px; text-align:center; margin:12px 0; }

    /* input */
    .inputRow{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:10px; }
    input{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.08);
      color:#e8f1ff;
      outline:none;
      min-width: 220px;
    }
    input::placeholder{ color: rgba(232,241,255,.55); }
    input:focus{ border-color: rgba(160, 220, 255, .55); box-shadow: 0 0 0 3px rgba(160, 220, 255, .12); }

    /* tutorial overlay */
    #tutorialOverlay .card{ width:min(92vw, 520px); }
    .stepPills{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .stepPill{ padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10); font-size:12px; opacity:.9; }
    .legend{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .legendItem{ display:flex; gap:8px; align-items:center; padding:8px 10px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.06); font-size:13px; }
  </style>
</head>
<body>
<div id="wrap">
  <div id="topbar">
    <div class="left">
      <div class="pill"><b>í­íƒˆ</b></div>

      <div class="pill" id="userPill">ğŸ‘¤ <b id="userNameText">â€”</b></div>

      <div class="pill">
        <span class="dot" id="diffDot"></span>
        <span id="difficultyPill">â€”</span>
      </div>

      <div class="pill">Moves: <span id="moves">0</span></div>
      <div class="pill">Time: <span id="time">0s</span></div>
      <div class="pill">Stars: <span id="totalStars">0</span></div>

      <div class="pill" id="rankPill">â€”</div>
    </div>

    <div class="left">
      <button id="btnUndo" disabled>ë¬´ë¥´ê¸°</button>
      <button id="btnHint" disabled>íŒíŠ¸</button>
      <button id="btnRestart" disabled>ë‹¤ì‹œì‹œì‘</button>
      <button id="btnMenu">ë©”ë‰´</button>
    </div>
  </div>

  <div id="game">
    <div id="timeLineWrap">
      <div id="timeLineLabel">â³ ë³„ ê¸°ì¤€</div>
      <div id="timeLine">
        <div id="timeFill"></div>
        <div class="mark" id="mark3"><div class="markText" id="mark3Text">â­â­â­</div></div>
        <div class="mark" id="mark2"><div class="markText" id="mark2Text">â­â­</div></div>
        <div class="mark" id="mark1"><div class="markText" id="mark1Text">â­</div></div>
      </div>
    </div>

    <canvas id="c" width="600" height="600"></canvas>
  </div>
</div>

<!-- Start Overlay -->
<div class="overlay show" id="startOverlay">
  <div class="card">
    <div class="title">í­íƒˆ</div>
    <p class="desc">í­ê·„ì„ ëˆŒëŸ¬ ë“œë˜ê·¸í•˜ë©´ ë°©í–¥ìœ¼ë¡œ ë¯¸ë„ëŸ¬ì§‘ë‹ˆë‹¤. ë²½/ì¥ì• ë¬¼/ë‹¤ë¥¸ í­ê·„ì— ë‹¿ì„ ë•Œê¹Œì§€ ì´ë™í•´ìš”.</p>

    <div class="inputRow">
      <input id="nameInput" maxlength="16" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (í•„ìˆ˜)" />
      <button class="bigBtn" id="btnStart" disabled>ê²Œì„ ì‹œì‘</button>
    </div>

    <div class="tiny" style="margin-top:10px;">* ì•„ì´ë””ëŠ” ê¸°ë¡/ë­í‚¹ ì €ì¥ì— ì‚¬ìš©ë¼ìš”.</div>
  </div>
</div>

<!-- Difficulty Overlay -->
<div class="overlay" id="diffOverlay">
  <div class="card">
    <div class="title">ë‚œì´ë„ ì„ íƒ</div>
    <p class="desc" id="unlockDesc">ë‚œì´ë„ë³„ë¡œ ë§µ í¬ê¸°ì™€ ìµœë‹¨í•´ ë‚œì´ë„ê°€ ë‹¬ë¼ìš”.</p>

    <div class="grid" id="diffGrid"></div>

    <div class="rowBetween">
      <button id="btnTutorial">íŠœí† ë¦¬ì–¼</button>
      <button id="btnDiffBack">ë’¤ë¡œ</button>
    </div>
  </div>
</div>

<!-- Fail Overlay -->
<div class="overlay" id="failOverlay">
  <div class="card">
    <div class="title">í’ë©! ğŸ§ğŸ’¦</div>
    <p class="desc">ë¹™íŒ ë°–ìœ¼ë¡œ ë–¨ì–´ì¡Œì–´ìš”. ì§ì „ í¼ì¦ì„ ê·¸ëŒ€ë¡œ ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”?</p>
    <div class="row">
      <button class="bigBtn" id="btnFailRestart">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
    </div>
  </div>
</div>

<!-- Clear Overlay -->
<div class="overlay" id="clearOverlay">
  <div class="card">
    <div class="title">í´ë¦¬ì–´! ğŸ‰</div>
    <p class="desc" id="clearTimeText">â€”</p>
    <div class="centerBig" id="starDisplay">â­â­â­</div>

    <div class="tiny" id="thresholdText" style="text-align:center; margin-top:-6px; opacity:.85;">â€”</div>

    <div class="rowBetween">
      <button id="btnClearHome">í™ˆìœ¼ë¡œ</button>
      <button class="bigBtn" id="btnClearNext">ë‹¤ìŒ â–¶</button>
    </div>
  </div>
</div>

<!-- Tutorial Overlay -->
<div class="overlay" id="tutorialOverlay">
  <div class="card">
    <div class="title" id="tTitle">íŠœí† ë¦¬ì–¼</div>
    <p class="desc" id="tDesc">â€”</p>

    <div class="legend" id="tLegend"></div>

    <div class="stepPills" id="tSteps"></div>

    <div class="rowBetween">
      <button id="tSkip">ê±´ë„ˆë›°ê¸°</button>
      <div style="display:flex; gap:10px;">
        <button id="tPrev">ì´ì „</button>
        <button class="bigBtn" id="tNext">ë‹¤ìŒ</button>
      </div>
    </div>
  </div>
</div>

<div id="msg"><div id="msgText"></div></div>

<script src="./game.js"></script>
</body>
</html>
