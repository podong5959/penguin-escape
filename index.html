<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>PENGUIN ESCAPE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --vh: 1vh;
      --safe-top: env(safe-area-inset-top);
      --safe-bottom: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --safe-right: env(safe-area-inset-right);
      --font-body: "Noto Sans KR", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --font-ui: "Jua", "Noto Sans KR", sans-serif;
    }
    html,body{
      margin:0; padding:0;
      width:100%;
      height:100%;
      background:#061018;
      font-family: var(--font-body);
      overflow:visible;
      -webkit-tap-highlight-color: transparent;
    }
    #app{
      position:fixed;
      inset:0;
      height: calc(var(--vh) * 100);
      width:100%;
      overflow:hidden;
      color:#fff;
    }

    /* BG */
    #bg{
      position:absolute; inset:0;
      background:#061018;
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      transform: translateZ(0);
      z-index:0;
    }
    #bg.bg-home{
      background-image:url("./asset/images/bg/home_main_v5.png?v=20260227a");
      animation:none;
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
    }
    #bg.bg-sea{
      background-image:url("./asset/images/bg/sea.png");
      background-repeat:repeat-x;
      background-size:auto 100%;
      animation: seaBgDrift 26s linear infinite;
      will-change: background-position;
    }
    @keyframes seaBgDrift{
      from { background-position: 0 50%; }
      to { background-position: 1800px 50%; }
    }

    /* Splash blur layer (strong) */
    #bgBlur{
      position:absolute; inset:0;
      display:none;
      background: rgba(0,0,0,.10);
      backdrop-filter: blur(18px);
      z-index:4;
      pointer-events:none;
    }
    #bgBlur.show{ display:block; }

    #splashLogo{
      position:absolute;
      left:50%; top:45%;
      transform:translate(-50%,-50%);
      width:min(82vw, 420px);
      height:auto;
      display:none;
      pointer-events:none;
      z-index:5;
    }
    #splashHint{
      position:absolute;
      left:50%;
      bottom: calc(90px + var(--safe-bottom));
      display:none;
      align-items:center;
      justify-content:center;
      min-width: 170px;
      padding: 8px 18px;
      transform: translateX(-50%);
      z-index:6;
      pointer-events:none;
      text-shadow: 0 4px 10px rgba(0,0,0,.35);
      opacity:.88;
      font-weight:1000;
      letter-spacing: .8px;
      border: 1px solid rgba(255,255,255,.42);
      border-radius: 6px;
      background: rgba(255,255,255,.10);
      box-shadow: 0 6px 20px rgba(0,0,0,.22), inset 0 0 0 1px rgba(255,255,255,.10);
      overflow:hidden;
      animation: splashHintGlow 1.4s ease-in-out infinite;
      font-family: var(--font-ui);
      pointer-events:auto;
      cursor:pointer;
      user-select:none;
    }
    #splashHint::before{
      content:"";
      position:absolute;
      left:-12%;
      width:124%;
      height:42%;
      top:-55%;
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.0));
      filter: blur(2px);
      opacity:0;
      animation: splashHintDrop 1.8s linear infinite;
    }
    #splashHint.show{ display:flex; }
    @keyframes splashHintGlow{
      0%,100%{
        opacity:.82;
        border-color: rgba(255,255,255,.35);
        box-shadow: 0 6px 16px rgba(0,0,0,.20), inset 0 0 0 1px rgba(255,255,255,.08);
      }
      45%{
        opacity:1;
        border-color: rgba(255,255,255,.62);
        box-shadow: 0 8px 22px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.18);
      }
    }
    @keyframes splashHintDrop{
      0%{ top:-55%; opacity:0; }
      15%{ opacity:.8; }
      55%{ opacity:.35; }
      100%{ top:125%; opacity:0; }
    }
    /* Top bar */
    #topBar{
      position:absolute;
      left:0; right:0;
      top:0;
      width:100%;
      padding: calc(10px + var(--safe-top)) 14px 10px;
      display:none; /* prevent flash before boot sets mode */
      align-items:center;
      gap:10px;
      z-index:10;
      justify-content:space-between;
      box-sizing:border-box;
    }
    #topBar.clearOnly #stagePill{ display:none !important; }
    #topBar.clearOnly .rightGroup{ display:none !important; }
    .leftGroup{ display:flex; gap:10px; align-items:flex-start; }
    .rightGroup{ display:flex; gap:10px; align-items:center; }
    .goldStack{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:6px;
    }
    .jamBtn{
      width:84px;
      height:24px;
      padding:0;
      border:none;
      background:transparent;
      cursor:pointer;
      display:none;
      position:relative;
    }
    .jamBtn img{ width:100%; height:100%; display:block; }
    .jamText{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      font-size:12px;
      color:#fff;
      text-shadow: 0 1px 2px rgba(0,0,0,.35);
      pointer-events:none;
    }
    .pill{
      display:flex;
      align-items:center;
      gap:8px;
      --pill-h: 30px;
      height: var(--pill-h);
      padding:0 10px;
      border-radius:999px;
      background: linear-gradient(180deg, rgba(160,210,245,.95), rgba(90,150,210,.95));
      border:1px solid rgba(255,255,255,.35);
      backdrop-filter: blur(6px);
      font-weight:900;
      font-size:14px;
      white-space:nowrap;
      font-family: var(--font-ui);
      box-shadow:
        inset 0 2px 0 rgba(255,255,255,.55),
        inset 0 -3px 6px rgba(0,0,0,.18),
        0 6px 14px rgba(0,0,0,.18);
    }
    #goldPill{
      --pill-h: 24px;
      width:84px;
      height:24px;
      min-width:unset;
      padding:0;
      background: none;
      border:none;
      box-shadow:none;
      position:relative;
      overflow:visible;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    #goldPill .goldPillBg{
      width:100%;
      height:100%;
      display:block;
    }
    #goldPill #goldText{
      position:absolute;
      left:0;
      right:0;
      top:50%;
      transform: translateY(-50%);
      font-weight:900;
      font-size:12px;
      color:#fff;
      text-shadow: 0 1px 2px rgba(0,0,0,.35);
      text-align:center;
    }
    #stagePill{
      --pill-h: 36px;
      min-width: 140px;
      justify-content:center;
      position:absolute;
      left:50%;
      top: calc(10px + var(--safe-top));
      transform: translateX(-50%);
      flex-direction:column;
      gap:2px;
      padding:6px 14px;
    }
    .modeText{
      font-size:12px;
      opacity:.9;
      letter-spacing:.4px;
    }
    .levelText{
      font-size:16px;
      line-height:1;
      font-weight:1000;
    }
    #goldPlus{
      position:absolute;
      right:4px;
      top:50%;
      width:18px;
      height:18px;
      transform: translateY(-50%);
      border:none;
      background:transparent;
      padding:0;
      margin:0;
      cursor:pointer;
      opacity:0; /* plus graphic is in the image */
    }
    .pill .icon{
      --icon-sz: 32px;
      width:var(--icon-sz);
      height:var(--icon-sz);
      display:inline-grid;
      place-items:center;
      opacity:.98;
      position:relative;
    }
    .pill .icon img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      transform: translateY(-4px);
    }
    #goldPill .icon.goldIcon{
      display:none;
    }

    /* ✅ 홈에서는 가운데 pill을 숨길 거라 wrapper만 남김 */
    #stagePill{
      max-width: 52vw;
      text-align:center;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Setting button (no visible shadow) */
    #btnSetting{
      width:44px; height:44px;
      border-radius:14px;
      border:none;
      background: linear-gradient(180deg, rgba(170,220,255,.95), rgba(90,150,210,.95));
      display:grid; place-items:center;
      cursor:pointer;
      padding:0;
      border:1px solid rgba(255,255,255,.35);
      box-shadow:
        inset 0 2px 0 rgba(255,255,255,.6),
        inset 0 -3px 6px rgba(0,0,0,.18),
        0 6px 14px rgba(0,0,0,.2);
    }
    #btnSetting img{
      width:34px; height:34px; display:block;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));
      opacity:.95;
    }

    /* HOME */
    #homeLayer{
      position:absolute; inset:0;
      z-index:6;
      display:none;
      overflow:hidden;
      touch-action: pan-y;
    }

    #homeSlides{
      position:absolute;
      inset:0;
      overflow:hidden;
      pointer-events:auto;
      z-index:7;
    }
    #homeSlidesTrack{
      width:500%;
      height:100%;
      display:flex;
      transform: translateX(-40%);
      transition: transform .5s ease-in-out;
    }
    .homeScreen{
      width:20%;
      height:100%;
      flex:0 0 20%;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, #b7e9ff 0%, #f9fdff 100%);
    }
    .homeScreen::before{
      display:none;
    }
    .homeScreen::after{
      content:"";
      position:absolute;
      inset:0;
      background-image: radial-gradient(circle at center, rgba(255,255,255,.65) 1px, transparent 1px);
      background-size:22px 22px;
      opacity:.2;
    }
    .screen-home{
      background: transparent;
      --penguin-x: 0px;
      --penguin-y: 67px;
      --penguin-scale: 2;
      --penguin-anchor-y: 72.8%;
    }
    .screen-home::before,
    .screen-home::after{
      display:none;
    }
    .homePenguinStage{
      position:absolute;
      inset:0;
      z-index:6;
      pointer-events:none;
      user-select:none;
    }
    .homePenguinShadow{
      position:absolute;
      left:calc(50% + var(--penguin-x));
      top:calc(var(--penguin-anchor-y) - 38px + var(--penguin-y));
      width:88px;
      height:22px;
      transform: translate(-50%, -50%) scale(var(--penguin-scale));
      border-radius:50%;
      background: radial-gradient(ellipse at center, rgba(36,56,72,.34) 0%, rgba(36,56,72,.1) 56%, rgba(36,56,72,0) 100%);
      filter: blur(0.6px);
      opacity:.8;
    }
    #homePenguinPreview{
      position:absolute;
      left:calc(50% + var(--penguin-x));
      top:calc(var(--penguin-anchor-y) + var(--penguin-y));
      width:clamp(80px, 24vw, 130px);
      height:auto;
      display:block;
      opacity:1;
      visibility:visible;
      z-index:2;
      transform: translate(-50%, -100%) scale(var(--penguin-scale));
      transform-origin: 50% 100%;
      object-fit:contain;
      filter:
        drop-shadow(0 6px 8px rgba(0,0,0,.18))
        drop-shadow(0 14px 18px rgba(18,44,60,.2));
      image-rendering:auto;
    }
    .homeScreenContent{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding-bottom:110px;
      z-index:1;
      text-align:center;
      pointer-events:auto;
    }
    .homeScreenTitle{
      font-family: var(--font-ui);
      font-weight:900;
      font-size:34px;
      letter-spacing:.6px;
      color:rgba(236,254,255,.95);
      text-shadow: 0 0 14px rgba(255,255,255,.35);
    }
    .homeScreenSubtitle{
      margin-top:10px;
      font-family: var(--font-ui);
      font-weight:800;
      font-size:20px;
      color: rgba(24,95,133,.85);
      text-shadow: 0 1px 2px rgba(255,255,255,.5);
    }
    .homeNavPanel{
      width:min(88vw, 520px);
      max-height: calc(100% - 210px);
      overflow:auto;
      border-radius:16px;
      border:1px solid rgba(120,190,220,.45);
      background: linear-gradient(180deg, rgba(245,252,255,.95) 0%, rgba(224,244,252,.92) 100%);
      box-shadow: 0 12px 28px rgba(24,95,133,.22);
      color:#124a69;
      padding:12px;
      box-sizing:border-box;
      -webkit-overflow-scrolling: touch;
    }
    .homeNavPanel .title{
      color:#0f597d;
      text-shadow:none;
      margin-bottom:10px;
      font-size:22px;
    }
    .homeNavPanel .desc{
      color:#2a7195;
      margin-bottom:10px;
    }
    .homeNavPanel .moneyBar{
      margin: 6px 0 10px;
    }
    .homeNavPanel .leaderboardMeta{
      color:#2a7195;
      margin:0 0 8px;
    }
    .homeNavPanel .leaderboardTabs .bigBtn{
      min-height:40px;
    }
    .homeNavPanel .leaderboardBlocks{
      margin:0;
    }
    .screen-shop .homeScreenContent{
      align-items:flex-start;
      padding-top:14px;
      padding-bottom:98px;
    }
    .homeNavPanel.shopPanel{
      border-color: rgba(146,146,146,.72);
      background: rgba(168,168,168,.8);
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      box-shadow: 0 12px 24px rgba(26,34,46,.26);
      color:#1f2937;
    }
    .shopPanel{
      display:flex;
      flex-direction:column;
      gap:8px;
      max-height: calc(100% - 12px);
      overflow:hidden;
      padding-top:2px;
    }
    .shopPanel .title{
      text-transform:lowercase;
      text-align:center;
      color:#111827;
      margin:0 0 2px;
      font-size:38px;
      font-weight:1000;
      letter-spacing:.2px;
      text-shadow: none;
    }
    .shopPanel .moneyBar{
      margin:2px 0 4px;
      display:flex;
      align-items:stretch;
      gap:10px;
    }
    .shopPanel .moneyBar .pill,
    #shopOverlay .moneyBar .pill{
      position:relative;
      --pill-h: 44px;
      min-width:0;
      width:auto;
      flex:1 1 0;
      height: var(--pill-h);
      padding:0 14px 0 52px;
      gap:0;
      justify-content:flex-start;
      font-size:16px;
      font-weight:850;
      color:#1f2937;
      background:#EDEDED;
      border-color: rgba(138,146,158,.52);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.82),
        0 3px 8px rgba(15,23,42,.16);
      box-sizing:border-box;
    }
    #shopOverlay .moneyBar{
      margin: 6px 0 10px;
      display:flex;
      align-items:stretch;
      gap:10px;
    }
    .shopPanel .moneyBar .pill span,
    #shopOverlay .moneyBar .pill span{
      display:block;
      line-height:1;
      letter-spacing:.2px;
      text-shadow:none;
    }
    .shopCurrencyIcon{
      width:32px;
      height:32px;
      object-fit:contain;
      display:block;
      position:absolute;
      left:10px;
      top:50%;
      transform:translateY(-50%);
      flex:0 0 32px;
      filter: drop-shadow(0 1px 2px rgba(0,0,0,.3));
    }
    .shopSheet{
      flex:1 1 auto;
      min-height:0;
      overflow-y:auto;
      overflow-x:hidden;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      padding-right:2px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
    }
    .shopBreak{
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:10px;
      width:100%;
      max-width:350px;
      margin:0 auto;
      flex:0 0 auto;
    }
    .shopBreak img{
      width:100%;
      max-width:240px;
      height:4px;
      object-fit:contain;
      opacity:.9;
    }
    .shopBreak .fallback{
      width:78%;
      height:3px;
      border-radius:999px;
      background: rgba(31,41,55,.55);
    }
    .shopBlock{
      border:1px solid rgba(135,191,221,.62);
      border-radius:14px;
      background: rgba(244,249,253,.94);
      overflow:hidden;
    }
    .shopBlock.useBlockBg{
      position:relative;
      border:none;
      background:transparent;
      width:100%;
      max-width:350px;
      margin:0 auto;
      flex:0 0 auto;
    }
    .shopBlock.useBlockBg::before{
      content:"";
      position:absolute;
      inset:0;
      background-image: var(--shop-block-bg);
      background-size:100% 100%;
      background-position:center;
      background-repeat:no-repeat;
      z-index:0;
      pointer-events:none;
    }
    .shopBlock.useBlockBg.blockSingle{ height:80px; }
    .shopBlock.useBlockBg.blockTripleGold{ height:240px; }
    .shopBlock.useBlockBg.blockTripleDia{ height:240px; }
    .shopBlock.useBlockBg.bgAdd{ --shop-block-bg: url("./asset/images/shop/block_add.png?v=20260226n"); }
    .shopBlock.useBlockBg.bgGold01{ --shop-block-bg: url("./asset/images/shop/block_gold01.png?v=20260226n"); }
    .shopBlock.useBlockBg.bgGold02{ --shop-block-bg: url("./asset/images/shop/block_gold02.png?v=20260226k"); }
    .shopBlock.useBlockBg.bgDia01{ --shop-block-bg: url("./asset/images/shop/block_dia01.png?v=20260226k"); }
    .shopItemRow{
      display:grid;
      grid-template-columns: 56px minmax(0,1fr) auto;
      align-items:center;
      gap:8px;
      min-height:60px;
      padding:0 10px;
      border-bottom:1px solid rgba(124,170,194,.28);
    }
    .shopItemRow:last-child{ border-bottom:none; }
    .shopItemRow:nth-child(even){ background: rgba(15,23,42,.06); }
    .shopBlock.useBlockBg .shopItemRow{
      position:relative;
      z-index:1;
      grid-template-columns: 86px minmax(0,1fr) auto;
      min-height:80px;
      height:80px;
      padding:0 12px 0 6px;
      border-bottom:none;
      background:transparent !important;
    }
    .shopBlock.useBlockBg.blockSingle .shopItemRow{
      grid-template-columns: 84px minmax(0,1fr) auto;
    }
    .shopBlock.useBlockBg.blockTripleGold .shopItemRow,
    .shopBlock.useBlockBg.blockTripleDia .shopItemRow{
      min-height:80px;
      height:80px;
    }
    .shopBlock.useBlockBg .shopIcon{ display:none; }
    .shopBlock.useBlockBg .shopIconSpacer{ visibility:hidden; }
    .shopBlock.useBlockBg .shopValue{
      text-align:left;
    }
    .shopIcon{
      width:44px;
      height:44px;
      object-fit:contain;
      display:block;
    }
    .shopIconSpacer{
      width:44px;
      height:44px;
      display:block;
    }
    .shopValue{
      font-size:20px;
      line-height:1;
      font-weight:850;
      color:#111827;
      text-align:center;
      letter-spacing:.2px;
      white-space:nowrap;
    }
    .shopValue.small{
      font-size:18px;
    }
    .shopBlock.useBlockBg .shopValue:not(.small){
      padding-left:2px;
    }
    .shopBuyBtn{
      border:none;
      border-radius:10px;
      min-width:90px;
      height:38px;
      padding:0 12px;
      font-family: var(--font-ui);
      font-size:14px;
      font-weight:850;
      color:#fff;
      background: linear-gradient(180deg, #4db4ff 0%, #1f7fde 100%);
      box-shadow: 0 4px 10px rgba(20,89,157,.25);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:5px;
      white-space:nowrap;
    }
    .shopBuyBtn img{
      width:15px;
      height:15px;
      object-fit:contain;
      display:block;
    }
    .shopBuyBtn:disabled{
      opacity:.55;
      cursor:default;
      box-shadow:none;
      background: linear-gradient(180deg, #9db4c9 0%, #7f98ad 100%);
    }
    .shopBuyBtn.ghost{
      color:#0f2d4f;
      background: linear-gradient(180deg, #d9ecfb 0%, #c5def2 100%);
      box-shadow: none;
    }
    .shopFooterDesc{
      margin:2px 2px 0;
      font-size:12px;
      color:#334155;
      text-align:left;
    }
    #inlineShopDesc,
    #shopDesc{
      display:none !important;
    }
    #shopOverlay .card{
      position:relative;
      background: rgba(168,168,168,.8);
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      border-color: rgba(146,146,146,.72);
    }
    #shopOverlay .title{ color:#111827; }
    #shopOverlay .desc{ color:#334155; }
    #shopOverlay .shopCloseX{
      position:absolute;
      top:10px;
      right:10px;
      width:34px;
      height:34px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.34);
      background: rgba(255,255,255,.24);
      color:#1f2937;
      font-size:22px;
      line-height:1;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:0;
      cursor:pointer;
      box-shadow: 0 3px 8px rgba(15,23,42,.18);
    }
    #shopOverlay .shopCloseX:active{
      transform: translateY(1px);
    }
    #dailySelectOverlay .dailySelectCard{
      width:min(92vw, 520px);
      border-radius:20px;
      border:1px solid rgba(119,183,216,.58);
      background: linear-gradient(180deg, rgba(244,252,255,.98) 0%, rgba(215,238,250,.95) 100%);
      color:#0f2b40;
      box-shadow: 0 18px 44px rgba(27,74,103,.28);
    }
    #dailySelectOverlay .title{
      color:#0f3d5c;
      margin-bottom:4px;
      font-size:24px;
    }
    #dailySelectOverlay .desc{
      color:#2a6286;
      opacity:1;
      margin-bottom:10px;
      font-weight:850;
    }
    .dailyRewardGuide{
      border-radius:14px;
      border:1px solid rgba(122,182,213,.5);
      background: linear-gradient(180deg, rgba(255,255,255,.9) 0%, rgba(233,245,252,.94) 100%);
      padding:8px 10px;
      margin-bottom:8px;
    }
    .dailyGuideHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin:0 0 8px;
    }
    .dailyGuideTitle{
      font-size:13px;
      font-weight:900;
      color:#1d5678;
      letter-spacing:.15px;
    }
    .dailyInfoBtn{
      width:22px;
      height:22px;
      border-radius:999px;
      border:1px solid rgba(80,145,184,.5);
      background: linear-gradient(180deg, rgba(255,255,255,.95) 0%, rgba(218,239,251,.96) 100%);
      color:#1f5b81;
      font-size:13px;
      font-weight:1000;
      line-height:1;
      padding:0;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      box-shadow: 0 2px 6px rgba(42,106,143,.18);
      flex:0 0 auto;
    }
    .dailyProgressCanvas{
      width:100%;
      height:96px;
      display:block;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.72) 0%, rgba(231,245,252,.72) 100%);
      border:1px solid rgba(126,186,217,.35);
      box-sizing:border-box;
    }
    .dailyStageGrid{
      display:grid;
      grid-template-columns:1fr;
      gap:8px;
      margin-bottom:10px;
    }
    .dailyStageBtn{
      text-align:left;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      justify-content:center;
      gap:6px;
      min-height:86px;
      border-radius:14px;
      border:1px solid rgba(126,186,217,.55);
      background: linear-gradient(180deg, #ffffff 0%, #edf6fb 100%);
      box-shadow: 0 6px 14px rgba(40,103,139,.16);
      color:#123a57;
      padding:12px 14px;
    }
    .dailyStageBtn.disabledBtn{
      opacity:.62;
      pointer-events:none;
      filter:saturate(.8);
    }
    .dailyStageBtn .dailyStageTop{
      display:flex;
      width:100%;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .dailyStageBtn .dailyStageTitle{
      font-size:17px;
      font-weight:1000;
      color:#0f2b40;
      line-height:1;
    }
    .dailyStageBtn .dailyStageState{
      border-radius:999px;
      padding:4px 8px;
      font-size:11px;
      font-weight:900;
      line-height:1;
      background: rgba(52,127,173,.16);
      color:#23597c;
      border:1px solid rgba(92,157,197,.35);
      white-space:nowrap;
    }
    .dailyStageBtn .dailyStageReward{
      font-size:14px;
      font-weight:900;
      color:#1e5273;
      line-height:1.2;
    }
    .dailyStageBtn .dailyStageMeta{
      font-size:12px;
      color:#2f6689;
      line-height:1.2;
    }
    .dailyStageBtn.isDone{
      border-color: rgba(80,168,130,.54);
      background: linear-gradient(180deg, #f6fffb 0%, #e6f7ee 100%);
    }
    .dailyStageBtn.isDone .dailyStageState{
      background: rgba(76,166,126,.18);
      color:#1f6e4a;
      border-color: rgba(76,166,126,.34);
    }
    .dailyStageBtn.isOpen{
      border-color: rgba(87,163,208,.62);
      background: linear-gradient(180deg, #ffffff 0%, #e9f6ff 100%);
    }
    .dailyStageBtn.isOpen .dailyStageState{
      background: rgba(66,146,194,.18);
      color:#176093;
      border-color: rgba(66,146,194,.35);
    }
    .dailyStageBtn.isLocked{
      border-color: rgba(129,158,177,.45);
      background: linear-gradient(180deg, #f3f6f8 0%, #e6edf2 100%);
    }
    .dailyStageBtn.isLocked .dailyStageState{
      background: rgba(124,145,162,.18);
      color:#4a6477;
      border-color: rgba(124,145,162,.34);
    }
    #dailySelectOverlay .dailySelectCloseRow{
      margin-top:2px;
    }
    #dailySelectOverlay .dailySelectCloseRow .ghostBtn{
      color:#1f5478;
      background: rgba(255,255,255,.68);
      border-color: rgba(111,172,204,.5);
    }
    @media (max-width: 420px){
      .shopPanel .moneyBar .pill,
      #shopOverlay .moneyBar .pill{
        --pill-h: 42px;
        padding:0 10px 0 46px;
        font-size:15px;
      }
      .shopCurrencyIcon{
        width:30px;
        height:30px;
        left:8px;
        flex-basis:30px;
      }
      #dailySelectOverlay .title{
        font-size:22px;
      }
      .dailyInfoBtn{
        width:20px;
        height:20px;
      }
      .dailyProgressCanvas{
        height:88px;
      }
      .dailyStageBtn{
        min-height:80px;
        padding:10px 12px;
      }
      .dailyStageBtn .dailyStageTitle{
        font-size:16px;
      }
      .dailyStageBtn .dailyStageReward{
        font-size:13px;
      }
      .dailyStageBtn .dailyStageMeta{
        font-size:11px;
      }
    }
    .screen-ranking{
      background: linear-gradient(180deg, #cfeefe 0%, #f8fdff 100%);
    }
    .screen-ranking .homeNavPanel{
      background: linear-gradient(180deg, rgba(251,254,255,.98) 0%, rgba(236,248,255,.96) 100%);
      color:#0f172a;
      border-color: rgba(128,190,219,.42);
      box-shadow: 0 10px 24px rgba(36,96,132,.2);
      display:flex;
      flex-direction:column;
      overflow:hidden;
      max-height: calc(100% - 12px);
    }
    .screen-ranking .homeScreenContent{
      align-items:flex-start;
      padding-top:14px;
      padding-bottom:98px;
    }
    .screen-ranking .homeNavPanel .title{
      color:#0f172a;
      font-weight:900;
    }
    .screen-ranking .homeNavPanel .leaderboardMeta{
      color:#0f172a;
      font-weight:800;
    }
    .screen-ranking .leaderboardBlocks{
      flex:1 1 auto;
      min-height:0;
      overflow-y:auto;
      padding-right:2px;
      touch-action: pan-y;
    }
    .screen-costume{
      background: linear-gradient(180deg, #cfeefe 0%, #f8fdff 100%);
    }
    .screen-costume .homeScreenContent{
      align-items:flex-start;
      padding-top:14px;
      padding-bottom:98px;
    }
    .costumeShopPanel{
      display:flex;
      flex-direction:column;
      gap:8px;
      max-height: calc(100% - 12px);
      overflow:hidden;
    }
    .costumeShopPanel .title{
      text-transform:lowercase;
    }
    .costumeShopPanel #costumeGrid{
      width:100%;
      margin:0;
      padding:2px 2px 4px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:10px;
      overflow-y:auto;
      min-height:0;
      touch-action: pan-y;
    }
    .costumeCard{
      border:none;
      border-radius:14px;
      padding:10px 8px;
      background: linear-gradient(180deg, rgba(255,255,255,.98) 0%, rgba(235,247,255,.96) 100%);
      border:1px solid rgba(136,186,214,.5);
      box-shadow: 0 8px 16px rgba(24,95,133,.14);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      min-height:186px;
    }
    .costumeCard.isLocked{
      background: linear-gradient(180deg, rgba(248,252,255,.94) 0%, rgba(231,241,250,.92) 100%);
      border-color: rgba(151,174,194,.5);
    }
    .costumeCard.isEquipped{
      border-color: rgba(84,177,122,.72);
      box-shadow: 0 0 0 2px rgba(98,195,138,.28), 0 10px 18px rgba(24,95,133,.16);
    }
    .costumeRowThumb{
      width:92px;
      height:92px;
      border-radius:50%;
      background-color: rgba(211,233,247,.55);
      background-image: url("./asset/images/penguin/costume_sheet_01.png?v=20260227_costume01");
      background-size:400% 400%;
      background-repeat:no-repeat;
      filter: drop-shadow(0 5px 8px rgba(0,0,0,.18));
    }
    .costumeName{
      font-family: var(--font-ui);
      font-size:14px;
      font-weight:900;
      line-height:1.2;
      color:#154a67;
      text-align:center;
      min-height:34px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .costumeActionBtn{
      min-width:96px;
    }
    .costumeActionBtn.ghost{
      color:#0f2d4f;
      background: linear-gradient(180deg, #d9ecfb 0%, #c5def2 100%);
      box-shadow: none;
    }
    .costumeActionBtn.equipped{
      color:#135b30;
      background: linear-gradient(180deg, #d9f5e2 0%, #bfe9cc 100%);
      box-shadow:none;
    }
    .costumeGemIcon{
      width:15px;
      height:15px;
      object-fit:contain;
      display:block;
      flex:0 0 15px;
    }
    @media (max-width: 420px){
      .costumeShopPanel #costumeGrid{
        gap:8px;
      }
      .costumeCard{
        min-height:174px;
        padding:8px 6px;
      }
      .costumeRowThumb{
        width:82px;
        height:82px;
      }
      .costumeName{
        font-size:13px;
      }
    }

    #homeButtons{
      position:absolute;
      left:0; right:0;
      bottom: calc(clamp(74px, calc(var(--vh) * 12.5), 104px) + var(--safe-bottom));
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      padding:0 40px;
      gap:14px;
      z-index:9;
      transition: opacity .22s ease;
    }
    .homeBtnWrap{
      position:relative;
      width:160px;
      height:92px;
      flex:0 0 160px;
    }
    .homeBigBtn{
      display:block;
      width:100%;
      height:100%;
      border-radius:18px;
      border:none;
      background:transparent;
      background-repeat:no-repeat;
      background-position:center;
      background-size:cover;
      padding:0;
      cursor:pointer;
      box-shadow:none;
      outline:none;
      -webkit-appearance:none;
      appearance:none;
      position:relative;
      overflow:hidden;
    }
    .homeBigBtn:focus,
    .homeBigBtn:focus-visible{
      outline:none;
      box-shadow:none;
    }
    .homeBigBtn img{ width:100%; height:100%; display:block; }
    .homeBigBtn.useSprite img{
      opacity:0;
      pointer-events:none;
    }

   .homeBtnLabel{
      position:absolute;
      left:0; right:0;
      top:0; bottom:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:1000;
      letter-spacing:.5px;
      color:#ffffff;
      text-shadow: none;
      pointer-events:none;
      font-family: var(--font-ui);
      line-height:1;

      /* ✅ 텍스트를 빨간 박스 쪽(위)로 올림 */
     transform: translateY(-5px);
}

    #stageLabel{ font-size:20px; }
    #dailyLabel{ font-size:20px; }
    #dailyLabel{ transform: translateY(-4px); }

    #homeNav{
      position:absolute;
      left:0;
      right:0;
      bottom:0;
      width:auto;
      height:64px;
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      align-items:end;
      justify-items:center;
      padding:4px 0 calc(6px + var(--safe-bottom));
      box-sizing:border-box;
      border-radius:18px 18px 0 0;
      background: linear-gradient(180deg, rgba(169,216,241,.6) 0%, rgba(120,211,237,.9) 30%, rgba(115,200,231,.98) 62%, rgba(115,200,231,1) 100%);
      border:1px solid rgba(131,190,224,.58);
      border-top-color:rgba(236,249,255,.92);
      box-shadow:
        inset 0 2px 10px rgba(255,255,255,.26),
        inset 0 -8px 14px rgba(56,121,146,.35),
        0 8px 16px rgba(4,19,54,.4);
      backdrop-filter: blur(12px);
      z-index:8;
      overflow:visible;
    }
    #homeNav::before{
      content:"";
      position:absolute;
      left:0;
      right:0;
      top:0;
      height:18px;
      border-radius:18px 18px 0 0;
      background:linear-gradient(180deg, rgba(255,255,255,.35) 0%, rgba(255,255,255,.18) 48%, rgba(255,255,255,0) 100%);
      pointer-events:none;
    }
    #homeNav::after{
      content:"";
      position:absolute;
      left:0;
      right:0;
      bottom:0;
      height:12px;
      border-radius:0;
      background:linear-gradient(180deg, rgba(115,200,231,0) 0%, rgba(115,200,231,.45) 100%);
      pointer-events:none;
    }
    .navBtn{
      width:100%;
      height:100%;
      background:transparent;
      border:none;
      padding:0 0 2px;
      cursor:pointer;
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-end;
      gap:1px;
    }
    .navIcon{
      width:38px;
      height:38px;
      color: rgba(217,244,255,.84);
      transition: transform .4s cubic-bezier(.34,1.56,.64,1), color .3s ease, filter .3s ease, opacity .3s ease;
      filter:saturate(.88);
    }
    .navIcon svg{
      width:100%;
      height:100%;
      display:block;
      stroke: currentColor;
      fill:none;
      stroke-linecap:round;
      stroke-linejoin:round;
      stroke-width:2.2;
    }
    .navLabel{
      font-size:14px;
      font-weight:800;
      color: rgba(210,241,255,.9);
      letter-spacing:.1px;
      transition: transform .3s ease, color .3s ease;
      text-shadow: 0 1px 2px rgba(0,0,0,.35);
      pointer-events:none;
      line-height:1;
    }
    .navBtn.isActive .navIcon{
      color:#fff;
      transform: translateY(-5px) scale(1.08);
      filter: drop-shadow(0 5px 6px rgba(0,0,0,.32));
    }
    .navBtn.isActive .navIcon svg{ stroke-width:2.6; }
    .navBtn.isActive .navLabel{
      color:rgba(255,255,255,.98);
    }
    .navBtn:not(.isActive):hover .navIcon{
      transform: translateY(-1px);
      color: rgba(207,250,254,.9);
    }
    @media (max-width: 420px) and (max-height: 720px){
      .screen-home{
        --penguin-y: 54px;
      }
      #homeButtons{
        bottom: calc(clamp(70px, calc(var(--vh) * 11.8), 92px) + var(--safe-bottom));
        padding:0 18px;
        gap:10px;
      }
      .homeBtnWrap{
        width:148px;
        height:85px;
        flex-basis:148px;
      }
      #stageLabel,
      #dailyLabel{
        font-size:19px;
      }
      #bg.bg-home{
        background-position:center bottom;
      }
    }
    .toggleField{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:center;
    }
    .toggleLabel{
      font-size:12px;
      font-weight:900;
      opacity:.9;
    }
    .toggleSwitch{
      position:relative;
      width:92px;
      height:36px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(220,60,60,.75);
      color:#fff;
      font-weight:1000;
      cursor:pointer;
      overflow:hidden;
    }
    .toggleSwitch.on{
      background: rgba(40,180,90,.85);
    }
    .toggleKnob{
      position:absolute;
      top:3px;
      left:3px;
      width:30px;
      height:30px;
      border-radius:50%;
      background:#fff;
      box-shadow: 0 4px 10px rgba(0,0,0,.25);
      transition: transform .18s ease;
    }
    .toggleSwitch.on .toggleKnob{ transform: translateX(56px); }
    .toggleText{
      position:absolute;
      top:0;
      height:100%;
      display:flex;
      align-items:center;
      font-size:12px;
      letter-spacing:.2px;
    }
    .toggleText.on{ left:12px; opacity:0; }
    .toggleText.off{ right:12px; opacity:0; }
    .toggleSwitch.on .toggleText.on{ opacity:.95; }
    .toggleSwitch.off .toggleText.off{ opacity:.95; }
    .langSelect{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color:#fff;
      font-weight:900;
      font-family: var(--font-ui);
      appearance:none;
    }
    /* Button press feel */
    button{
      transition: transform .08s ease, filter .08s ease;
      transform-origin: center;
    }
    button:active{
      transform: translateY(2px) scale(0.98);
      filter: brightness(0.92) saturate(0.98);
    }

    /* GAME */
    #gameLayer{
      position:absolute; inset:0;
      z-index:6;
      display:none;
    }

    /* ✅ 보드 "진짜 중앙" */
    #gameWrap{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      /* nudge play area 10px downward */
      padding: calc(118px + var(--safe-top)) 14px calc(150px + var(--safe-bottom)) 14px;
    }
    canvas{
      width:min(92vw, 760px);
      aspect-ratio: 1 / 1;
      height:auto;
      touch-action:none;
    }

    /* ✅ 하단 버튼: 아이콘이 거의 꽉 차게 */
    #bottomBar{
      position:absolute;
      left:0; right:0;
      bottom:0;
      padding: 10px 14px calc(18px + var(--safe-bottom));
      display:flex;
      justify-content:center;
      gap:16px;
      z-index:10;
    }
    #bottomBar.tutorialFocusRaise{
      z-index:96;
    }
    .actionBtn{
      --action-w: clamp(84px, 22vw, 122px);
      flex:0 0 var(--action-w);
      width:var(--action-w);
      height:var(--action-w);
      border-radius:16px;
      border:none;
      background: linear-gradient(180deg, rgba(160,210,245,.95), rgba(90,150,210,.95));
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      overflow:hidden;
      position:relative;
      isolation:isolate;
      padding:0;                 /* ✅ */
      border:1px solid rgba(255,255,255,.35);
      box-shadow:
        inset 0 2px 0 rgba(255,255,255,.55),
        inset 0 -3px 6px rgba(0,0,0,.18),
        0 6px 14px rgba(0,0,0,.18);
    }
    .actionBtn.disabled{
      opacity:.45;
      filter: saturate(.65) brightness(.95);
      pointer-events:none;
    }
    .actionBtn.disabled + .hintPriceTag{
      opacity:.45;
      filter:saturate(.65) brightness(.95);
    }
    .actionBtn.locked{
      opacity:.55;
      filter: saturate(.7) brightness(.98);
    }
    .actionBtn.locked + .hintPriceTag{
      opacity:.55;
      filter:saturate(.7) brightness(.98);
    }
    .actionIcon{
      width:92%;
      height:92%;
      display:block;
      position:relative;
      z-index:1;
      margin:auto;
      background-repeat: no-repeat;
      background-size: contain;
      background-position: center;
      image-rendering: auto;
    }
    .iconHint{
      background-image: url("./asset/images/ui/new_btn/new_btn_hint.png");
    }
    .iconUndo{
      background-image: url("./asset/images/ui/new_btn/new_btn_undo.png");
    }
    .hintPriceTag{
      margin-top:4px;
      width:80px;
      height:30px;
      padding:0;
      border:none;
      background: none;
      box-shadow:none;
      position:relative;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .hintPriceTag .hintPriceBg{
      width:100%;
      height:100%;
      display:block;
    }
    .hintPriceTag .hintPriceText{
      position:absolute;
      left:0;
      right:0;
      top:50%;
      transform: translateY(-50%);
      text-align:center;
      font-weight:900;
      font-size:12px;
      letter-spacing:.2px;
      color:#fff;
      text-shadow: 0 1px 2px rgba(0,0,0,.35);
      line-height:1;
    }
    .actionStack{
      display:flex;
      flex-direction:column;
      align-items:center;
    }
    /* Toast */
    #toast{
      position:absolute;
      left:0; right:0;
      bottom: calc(210px + var(--safe-bottom));
      display:flex;
      justify-content:center;
      pointer-events:none;
      z-index:100;
      opacity:0;
      transform: translateY(8px);
      transition: all .18s ease;
    }
    #toast.show{ opacity:1; transform: translateY(0); }
    #toast .bubble{
      width: min(86vw, 460px);
      padding:14px 18px;
      border-radius:999px;
      background:rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.22);
      backdrop-filter: blur(12px);
      font-weight:1000;
      font-size:18px;
      letter-spacing:.3px;
      text-shadow: 0 2px 8px rgba(0,0,0,.4);
      text-align:center;
    }

    /* Privacy cover */
    #privacyCover{
      position:absolute; inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(12px);
      display:none;
      z-index:80;
    }
    #privacyCover.show{ display:block; }

    /* Overlay */
    .overlay{
      position:absolute; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(12px);
      z-index:90;
      padding:16px;
    }
    .overlay.show{ display:flex; }
    .card{
      width:min(92vw, 520px);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10,18,28,.92);
      padding:16px;
      box-shadow: 0 20px 80px rgba(0,0,0,.45);
    }
    .title{
      font-weight:1000;
      font-size:18px;
      margin:0 0 8px;
      font-family: var(--font-ui);
    }
    .desc{ opacity:.85; font-size:13px; line-height:1.5; margin:0 0 14px; white-space:pre-line; }
    .row{ display:flex; gap:10px; justify-content:flex-end; }
    .rowBetween{ display:flex; gap:10px; justify-content:space-between; }
    .textInput{
      width:100%;
      box-sizing:border-box;
      padding:12px 14px;
      margin:0 0 10px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color:#fff;
      font-size:15px;
      font-family: var(--font-body);
      outline:none;
    }
    .textInput::placeholder{ color:rgba(255,255,255,.5); }
    .textInput:focus{
      border-color: rgba(126,216,255,.9);
      box-shadow: 0 0 0 3px rgba(126,216,255,.18);
    }
    .inlineHint{
      margin:4px 0 14px;
      font-size:12px;
      opacity:.9;
    }
    .linkBtn{
      border:none;
      background:transparent;
      color:#8ee3ff;
      font-weight:800;
      font-family: var(--font-body);
      cursor:pointer;
      padding:0;
      text-decoration:underline;
    }
    .profileIdRow{
      display:flex;
      align-items:center;
      gap:8px;
      margin:0 0 14px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }
    .profileIdLabel{
      font-size:14px;
      opacity:.9;
      flex:0 0 auto;
    }
    .profileIdValue{
      flex:1 1 auto;
      min-width:0;
      font-weight:900;
      font-size:16px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .iconBtn{
      width:34px;
      height:34px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.1);
      color:#fff;
      font-size:18px;
      line-height:1;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:0;
      cursor:pointer;
      flex:0 0 auto;
    }

    .bigBtn{
      flex:1;
      padding:14px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.10);
      color:#fff;
      font-weight:1000;
      cursor:pointer;
      font-family: var(--font-ui);
    }
    .ghostBtn{ background: rgba(255,255,255,.06); }
    .dangerBtn{ background: rgba(255,90,90,.22); border-color: rgba(255,90,90,.35); }
    .disabledBtn{
      opacity:.45;
      pointer-events:none;
      filter:saturate(.7);
    }

    /* Loading: penguin sheet animation + text only */
    #loadingOverlay{
      background: rgba(0,0,0,.10);
      backdrop-filter: blur(12px);
    }
    #loadingOverlay.boot{
      background: rgba(246,240,230,1);
      backdrop-filter: none;
    }
    #loadingOverlay.boot .loadingText{
      color:#2b2b2b;
      text-shadow: none;
    }
    #loadingOverlay .card{
      background: transparent;
      border: none;
      box-shadow: none;
      padding: 0;
      text-align:center;
      width: auto;
    }
    .loadingWrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 10px;
    }
    .loadingPenguin{
      width: 112px;
      height: 112px;
      background-image: url("./asset/images/penguin/penguin_sheet_03.png");
      background-size: 400% 400%;
      background-repeat: no-repeat;
      background-position: 0% 0%;
      image-rendering: auto;
      animation: loadingPenguinFrames 0.8s steps(1, end) infinite;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
    }
    /* Logo splash */
    #logoSplash{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:
        radial-gradient(120% 95% at 50% 12%, rgba(142,88,255,.36), rgba(142,88,255,0) 56%),
        radial-gradient(95% 85% at 18% 82%, rgba(86,34,140,.30), rgba(86,34,140,0) 62%),
        radial-gradient(90% 95% at 82% 70%, rgba(64,28,112,.24), rgba(64,28,112,0) 60%),
        #02040a;
      opacity:0;
      transition: opacity .32s ease;
      z-index:140;
      overflow:hidden;
    }
    #logoSplash::before,
    #logoSplash::after{
      content:"";
      position:absolute;
      inset:-25%;
      pointer-events:none;
    }
    #logoSplash::before{
      background:
        radial-gradient(2px 2px at 10% 14%, rgba(255,255,255,.72), transparent 70%),
        radial-gradient(1.8px 1.8px at 24% 72%, rgba(213,197,255,.58), transparent 70%),
        radial-gradient(2px 2px at 39% 38%, rgba(255,255,255,.62), transparent 70%),
        radial-gradient(1.6px 1.6px at 57% 20%, rgba(195,178,255,.54), transparent 70%),
        radial-gradient(2px 2px at 72% 64%, rgba(255,255,255,.66), transparent 70%),
        radial-gradient(1.8px 1.8px at 88% 42%, rgba(214,201,255,.52), transparent 70%);
      opacity:.55;
      filter: blur(.2px);
      animation: logoStarDrift 12s linear infinite;
    }
    #logoSplash::after{
      background: radial-gradient(52% 34% at 50% 62%, rgba(168,120,255,.20), rgba(168,120,255,0) 70%);
      animation: logoNebulaPulse 2.4s ease-in-out infinite;
    }
    #logoSplash.show{
      display:flex;
      opacity:1;
    }
    .logoMark{
      width:min(76vw, 440px);
      max-width:440px;
      min-width:180px;
      height:auto;
      display:block;
      object-fit:contain;
      animation: logoFloat 2.8s ease-in-out infinite;
      filter:
        drop-shadow(0 0 22px rgba(170,132,255,.34))
        drop-shadow(0 14px 34px rgba(0,0,0,.58));
    }
    @keyframes logoFloat{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-5px); }
    }
    @keyframes logoStarDrift{
      from{ transform: translate3d(0,0,0); }
      to{ transform: translate3d(-5%, 3%, 0); }
    }
    @keyframes logoNebulaPulse{
      0%,100%{ opacity:.72; transform: scale(1); }
      50%{ opacity:1; transform: scale(1.04); }
    }
    /* Result overlays (clear/fail) */
    #clearOverlay.overlay,
    #failOverlay.overlay{
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(12px);
    }
    .resultWrap{
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
      padding: 6px 6px 16px;
      pointer-events:auto;
    }
    .clearFxCanvas{
      position:fixed;
      inset:0;
      width:100vw;
      height:100vh;
      pointer-events:none;
      z-index:0;
    }
    .resultWrap > *:not(.clearFxCanvas):not(.failBubbles){
      position:relative;
      z-index:1;
    }
    .resultTitle{
      font-size:44px;
      font-weight:1000;
      letter-spacing:1px;
      color:#ffe38b;
      text-shadow: 0 6px 18px rgba(0,0,0,.35);
      font-family: var(--font-ui);
    }
    .resultDesc{
      font-size:14px;
      font-weight:900;
      color:#ffffff;
      opacity:.9;
    }
    .resultBtns{
      display:flex;
      gap:14px;
      align-items:flex-end;
    }
    .resultBtn{
      min-width:140px;
      padding:12px 16px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.2);
      font-weight:1000;
      color:#fff;
      cursor:pointer;
      background: rgba(80,170,255,.85);
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
    }
    .resultBtn.reward{
      background: rgba(90,190,120,.85);
    }
    .resultBtn.x2{
      background: rgba(255,120,90,.9);
    }
    .adTag{
      position:relative;
      font-size:10px;
      font-weight:1000;
      color:#0f172a;
      padding:4px 8px;
      border-radius:10px;
      background: rgba(255,255,255,.96);
      border:1px solid rgba(130,150,170,.45);
      margin-bottom:6px;
      text-align:center;
      display:inline-flex;
      gap:5px;
      align-items:center;
    }
    .adTag::after{
      content:"";
      position:absolute;
      left:12px;
      bottom:-5px;
      width:0; height:0;
      border-left:6px solid transparent;
      border-right:6px solid transparent;
      border-top:6px solid rgba(255,255,255,.96);
    }
    .adIcon{
      width:14px;
      height:14px;
      display:block;
      object-fit:contain;
      flex:0 0 14px;
      filter: drop-shadow(0 1px 2px rgba(0,0,0,.35));
    }
    .heroBadge{
      width:86px;
      height:86px;
      background-image: url("./asset/images/penguin/penguin_hero_sheet_05.png");
      background-size: 400% 400%;
      background-position: 66.666% 100%; /* frame #15 */
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.25));
    }
    .failBadge{
      width:76px;
      height:76px;
      background-image: url("./asset/images/penguin/penguin_sheet_03.png");
      background-size: 400% 400%;
      background-position: 100% 100%; /* frame #16 */
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.25));
    }
    .clearSparkles{
      position:absolute;
      inset:-40px;
      pointer-events:none;
    }
    .failBubbles{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .clearSparkles{ display:none; }
    .spark{
      position:absolute;
      width:10px; height:10px;
      border-radius:50%;
      background: #fff6a6;
      box-shadow: 0 0 12px rgba(255,230,120,.9);
      animation: sparklePop 1.4s ease-out infinite;
    }
    .rewardFlyCoin{
      position:fixed;
      width:18px;
      height:18px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #ffd84d, #d7961c 72%);
      border:2px solid rgba(255,255,255,.85);
      box-shadow: 0 4px 10px rgba(0,0,0,.28);
      pointer-events:none;
      z-index:220;
      will-change: transform, opacity;
    }
    .rewardFlyGem{
      position:fixed;
      width:64px;
      height:64px;
      background-image:url("./asset/images/ui/icon_dia.png");
      background-size:contain;
      background-repeat:no-repeat;
      background-position:center;
      filter: drop-shadow(0 4px 10px rgba(0,0,0,.28));
      pointer-events:none;
      z-index:220;
      will-change: transform, opacity;
    }
    .spark:nth-child(1){ left:6%; top:12%; animation-delay:0s; width:8px; height:8px; }
    .spark:nth-child(2){ right:6%; top:10%; animation-delay:.15s; width:12px; height:12px; }
    .spark:nth-child(3){ left:18%; top:35%; animation-delay:.25s; width:10px; height:10px; }
    .spark:nth-child(4){ right:20%; top:40%; animation-delay:.05s; width:14px; height:14px; }
    .spark:nth-child(5){ left:35%; bottom:6%; animation-delay:.35s; width:9px; height:9px; }
    .spark:nth-child(6){ right:32%; bottom:8%; animation-delay:.45s; width:11px; height:11px; }
    .spark:nth-child(7){ left:48%; top:6%; animation-delay:.2s; width:7px; height:7px; }
    .spark:nth-child(8){ right:45%; top:55%; animation-delay:.3s; width:13px; height:13px; }
    .spark:nth-child(9){ left:8%; bottom:28%; animation-delay:.4s; width:10px; height:10px; }
    .spark:nth-child(10){ right:10%; bottom:30%; animation-delay:.1s; width:8px; height:8px; }
    @keyframes sparklePop{
      0%{ transform: scale(0.4); opacity:0; }
      25%{ opacity:1; }
      60%{ transform: scale(1.8); opacity:.9; }
      100%{ transform: scale(0.6) translateY(12px); opacity:0; }
    }
    .bubble{
      position:absolute;
      width:10px; height:10px;
      border-radius:50%;
      background: rgba(190,230,255,.86);
      box-shadow: 0 0 12px rgba(160,220,255,.65);
      animation: bubbleUp 2.4s ease-in-out infinite;
    }
    .bubble:nth-child(1){ left:4%; top:18%; animation-delay:0s; width:8px; height:8px; }
    .bubble:nth-child(2){ left:12%; top:34%; animation-delay:.18s; width:6px; height:6px; }
    .bubble:nth-child(3){ left:21%; top:26%; animation-delay:.35s; width:10px; height:10px; }
    .bubble:nth-child(4){ left:29%; top:44%; animation-delay:.1s; width:7px; height:7px; }
    .bubble:nth-child(5){ left:37%; top:15%; animation-delay:.48s; width:9px; height:9px; }
    .bubble:nth-child(6){ left:46%; top:53%; animation-delay:.62s; width:6px; height:6px; }
    .bubble:nth-child(7){ left:55%; top:30%; animation-delay:.26s; width:10px; height:10px; }
    .bubble:nth-child(8){ left:63%; top:62%; animation-delay:.54s; width:7px; height:7px; }
    .bubble:nth-child(9){ left:71%; top:21%; animation-delay:.32s; width:9px; height:9px; }
    .bubble:nth-child(10){ left:80%; top:48%; animation-delay:.72s; width:6px; height:6px; }
    .bubble:nth-child(11){ left:88%; top:28%; animation-delay:.44s; width:8px; height:8px; }
    .bubble:nth-child(12){ left:95%; top:56%; animation-delay:.14s; width:7px; height:7px; }
    @keyframes bubbleUp{
      0%{ transform: translateY(22px) scale(.84); opacity:0; }
      25%{ opacity:.95; }
      100%{ transform: translateY(-42px) scale(1.06); opacity:0; }
    }
    .loadingText{
      font-family: var(--font-ui);
      font-size: 16px;
      font-weight: 900;
      color: #ffffff;
      text-shadow: 0 2px 8px rgba(0,0,0,.35);
      letter-spacing: .2px;
    }
    @keyframes loadingPenguinFrames{
      0%, 24%{ background-position: 0% 0%; }        /* #1 */
      25%, 49%{ background-position: 33.333% 0%; }  /* #2 */
      50%, 74%{ background-position: 66.666% 0%; }  /* #3 */
      75%, 100%{ background-position: 100% 0%; }    /* #4 */
    }

    /* Tutorial coach */
    #tutorialCoach{
      position:absolute;
      inset:0;
      display:none;
      justify-content:center;
      align-items:center;
      pointer-events:none;
      z-index:95;
      padding: 16px;
    }
    #tutorialCoach.show{ display:flex; }
    #tutorialCoach .coachCard{
      width:min(92vw, 540px);
      border-radius:20px;
      border:1px solid rgba(255,255,255,.20);
      background: rgba(10,18,30,.92);
      padding:16px;
      box-shadow: 0 24px 72px rgba(0,0,0,.45);
      pointer-events:auto;
      position:relative;
    }
    @media (max-height: 760px){
      #tutorialCoach .coachCard{ padding:12px; }
    }
    .coachTitle{ font-weight:1000; font-size:16px; margin:0 0 6px; }
    #tutorialCoach .coachTitle{ padding-right:72px; }
    .coachDesc{ opacity:.9; font-size:13px; line-height:1.5; margin:0 0 12px; white-space:pre-line; }
    .tutorialSkipMini{
      position:absolute;
      top:10px;
      right:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-width:unset;
      width:auto;
      height:28px;
      padding:0 10px;
      line-height:1;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.24);
      background: rgba(18,30,46,.9);
      color:#dbe9f7;
      font-size:11px;
      font-weight:900;
      cursor:pointer;
    }
    .tutorialSkipMini:active{ transform: translateY(1px); }
    .tutorialVisual{
      width:100%;
      min-height:106px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(26,40,58,.84) 0%, rgba(13,24,40,.80) 100%);
      margin: 0 0 12px;
      padding:10px;
      box-sizing:border-box;
      overflow:hidden;
      position:relative;
    }
    .tutorialVisual.canvasMode{
      padding:10px;
      min-height:120px;
    }
    .tutorialVisual .tvLabel{
      position:absolute;
      left:10px;
      top:8px;
      font-size:11px;
      font-weight:900;
      color:rgba(255,248,220,.95);
      padding:3px 7px;
      border-radius:999px;
      background: rgba(255,214,120,.24);
      border:1px solid rgba(255,214,120,.35);
      z-index:2;
    }
    .tutorialVisual .tvCanvas{
      width:100%;
      height:108px;
      display:block;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(19,34,52,.76), rgba(10,21,35,.72));
      border:1px solid rgba(153,206,241,.22);
      box-sizing:border-box;
    }
    .tutorialVisual.hero .tvHeroWrap{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding-top:8px;
    }
    .tutorialVisual .tvHeroPenguin{
      width:74px;
      height:74px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(circle at 50% 22%, rgba(255,226,140,.28), rgba(255,226,140,0) 58%),
        rgba(8,18,30,.65);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 24px rgba(0,0,0,.3);
    }
    .tutorialVisual .tvHeroPenguin img{
      width:58px;
      height:58px;
      object-fit:contain;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.35));
    }
    .tutorialVisual .tvHeroText{
      font-size:13px;
      line-height:1.45;
      color:#dcedff;
      font-weight:800;
      max-width: 240px;
    }
    .tutorialVisual .tvTrack{
      position:relative;
      width:min(320px, 82vw);
      height:64px;
      margin:18px auto 0;
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:4px;
    }
    .tutorialVisual .tvCell{
      border-radius:10px;
      border:1px solid rgba(160,210,245,.45);
      background: linear-gradient(180deg, rgba(210,235,255,.38), rgba(160,205,235,.34));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
    }
    .tutorialVisual .tvPeng{
      position:absolute;
      left:0;
      top:13px;
      width:36px;
      height:36px;
      background-image: url("./asset/images/piece/penguin_0.png");
      background-size: contain;
      background-repeat:no-repeat;
      background-position:center;
      filter: drop-shadow(0 2px 5px rgba(0,0,0,.35));
    }
    .tutorialVisual .tvFinger{
      position:absolute;
      left:4px;
      top:34px;
      width:18px;
      height:18px;
      border-radius:50%;
      border:2px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.24);
      box-shadow: 0 2px 8px rgba(0,0,0,.35);
    }
    .tutorialVisual.slide .tvPeng{
      animation: tvSlidePeng 1.8s ease-in-out infinite;
    }
    .tutorialVisual.slide .tvFinger{
      animation: tvSlideFinger 1.8s ease-in-out infinite;
    }
    .tutorialVisual.fall .tvPeng{
      animation: tvFallPeng 1.8s ease-in-out infinite;
    }
    .tutorialVisual.fall .tvFinger{
      animation: tvFallFinger 1.8s ease-in-out infinite;
    }
    .tutorialVisual.pass .tvGoal{
      position:absolute;
      left:50%;
      top:21px;
      width:20px;
      height:20px;
      transform:translateX(-50%);
      border-radius:6px;
      border:1px solid rgba(255,255,255,.6);
      background: rgba(255,215,110,.56);
      box-shadow: 0 0 10px rgba(255,220,130,.45);
    }
    .tutorialVisual.pass .tvPeng{
      animation: tvPassPeng 1.9s linear infinite;
    }
    .tutorialVisual.hint .tvTrack{
      gap:3px;
    }
    .tutorialVisual.hint .tvCell{
      animation: tvHintCell 1.4s ease-in-out infinite;
    }
    .tutorialVisual.hint .tvCell:nth-child(2){ animation-delay:.08s; }
    .tutorialVisual.hint .tvCell:nth-child(3){ animation-delay:.16s; }
    .tutorialVisual.hint .tvCell:nth-child(4){ animation-delay:.24s; }
    .tutorialVisual.hint .tvCell:nth-child(5){ animation-delay:.32s; }
    .tutorialVisual.hint .tvHintText{
      position:absolute;
      right:10px;
      bottom:8px;
      font-size:12px;
      font-weight:900;
      color:#ffefb8;
      background: rgba(30,40,12,.5);
      border:1px solid rgba(255,220,110,.35);
      border-radius:999px;
      padding:3px 8px;
    }
    @keyframes tvSlidePeng{
      0%,18%{ transform: translateX(0); }
      68%,100%{ transform: translateX(220px); }
    }
    @keyframes tvSlideFinger{
      0%,8%{ transform: translateX(0); opacity:.95; }
      34%{ transform: translateX(38px); opacity:1; }
      66%{ transform: translateX(70px); opacity:.15; }
      100%{ transform: translateX(70px); opacity:0; }
    }
    @keyframes tvFallPeng{
      0%,20%{ transform: translateX(0) translateY(0); opacity:1; }
      62%{ transform: translateX(220px) translateY(0); opacity:1; }
      92%,100%{ transform: translateX(260px) translateY(28px) scale(.82); opacity:0; }
    }
    @keyframes tvFallFinger{
      0%,10%{ transform: translateY(0); opacity:.95; }
      30%{ transform: translateY(24px); opacity:1; }
      68%{ transform: translateY(48px); opacity:.1; }
      100%{ transform: translateY(48px); opacity:0; }
    }
    @keyframes tvPassPeng{
      0%{ transform: translateX(0); }
      100%{ transform: translateX(220px); }
    }
    @keyframes tvHintCell{
      0%,100%{
        background: linear-gradient(180deg, rgba(255,233,120,.34), rgba(235,204,95,.26));
        border-color: rgba(255,229,120,.5);
      }
      50%{
        background: linear-gradient(180deg, rgba(255,247,170,.76), rgba(255,224,95,.66));
        border-color: rgba(255,247,190,.9);
      }
    }
    .pulse{
      animation: pulse 1.2s ease-in-out infinite;
      box-shadow: 0 0 0 0 rgba(255,255,255,.65);
    }
    @keyframes pulse{
      0%{ transform: scale(1); box-shadow:0 0 0 0 rgba(255,255,255,.55); }
      70%{ transform: scale(1.03); box-shadow:0 0 0 10px rgba(255,255,255,0); }
      100%{ transform: scale(1); box-shadow:0 0 0 0 rgba(255,255,255,0); }
    }

    /* Tutorial focus */
    @property --focus-x{
      syntax: '<length-percentage>';
      inherits: true;
      initial-value: 50%;
    }
    @property --focus-y{
      syntax: '<length-percentage>';
      inherits: true;
      initial-value: 50%;
    }
    @property --focus-r{
      syntax: '<length>';
      inherits: true;
      initial-value: 56px;
    }
    #tutorialFocus{
      position:fixed; inset:0;
      display:none;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      --focus-x: 50%;
      --focus-y: 50%;
      --focus-r: 56px;
      -webkit-mask: radial-gradient(circle var(--focus-r) at var(--focus-x) var(--focus-y), transparent 0, transparent 70%, #000 72%);
      mask: radial-gradient(circle var(--focus-r) at var(--focus-x) var(--focus-y), transparent 0, transparent 70%, #000 72%);
      z-index:94;
      pointer-events:none;
      opacity: 0;
      transition: opacity .22s ease, backdrop-filter .28s ease, --focus-x .28s ease, --focus-y .28s ease, --focus-r .28s ease;
    }
    #tutorialFocus.show{ display:block; opacity:1; }
    #tutorialFocus.cardOnly{
      -webkit-mask: none;
      mask: none;
      background: rgba(0,0,0,.56);
      backdrop-filter: blur(10px);
      pointer-events:auto;
    }
    .tutorialFocusTarget{
      position:relative;
      z-index:96;
      box-shadow: 0 0 0 6px rgba(120,220,255,.7), 0 0 18px rgba(120,220,255,.9);
      animation: tutorialSpark 1.1s ease-in-out infinite;
    }
    @keyframes tutorialSpark{
      0%{ filter:brightness(1); transform:translateZ(0); }
      50%{ filter:brightness(1.25); }
      100%{ filter:brightness(1); }
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    #tutorialClearOverlay.overlay{
      background: rgba(0,0,0,.48);
      backdrop-filter: blur(10px);
      z-index:97;
    }
    #tutorialClearOverlay .card{
      width:min(88vw, 420px);
      text-align:center;
      border-color: rgba(255,232,153,.34);
      background:
        radial-gradient(120% 90% at 10% 0%, rgba(255,208,116,.20) 0%, rgba(255,208,116,0) 55%),
        linear-gradient(160deg, rgba(22,38,60,.96) 0%, rgba(12,24,42,.96) 100%);
      box-shadow: 0 22px 70px rgba(0,0,0,.45);
      padding:18px;
    }
    #tutorialClearOverlay .title{
      color:#fff3cc;
      text-shadow: 0 1px 8px rgba(255,215,133,.25);
      margin-bottom:10px;
    }

    /* ✅ Shop money bar inside overlay */
    .moneyBar{
      display:flex;
      gap:10px;
      margin: 10px 0 14px;
      justify-content:flex-start;
    }

    /* Settings (match ranking tone) */
    #gearOverlay{
      align-items:center;
      justify-content:center;
      overflow-y:auto;
      padding-top:max(16px, calc(var(--safe-top) + 16px));
      padding-bottom:max(16px, calc(var(--safe-bottom) + 16px));
    }
    #gearOverlay .card{
      max-height: calc((var(--vh) * 100) - var(--safe-top) - var(--safe-bottom) - 20px);
      overflow:auto;
      background:
        radial-gradient(120% 90% at 10% 0%, rgba(77,167,226,.22) 0%, rgba(77,167,226,0) 52%),
        linear-gradient(160deg, rgba(14,28,47,.96) 0%, rgba(10,22,39,.96) 55%, rgba(8,18,33,.98) 100%);
      border:1px solid rgba(133,208,255,.24);
      box-shadow:
        0 24px 80px rgba(0,0,0,.5),
        inset 0 1px 0 rgba(255,255,255,.08);
    }
    #gearOverlay .title{
      color:#f2fbff;
      text-shadow: 0 1px 10px rgba(66,178,242,.24);
    }
    #gearOverlay .desc{
      color:#b8d4e7;
      opacity:.95;
    }
    #gearOverlay .settingsPanel{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:10px;
      margin-bottom:10px;
    }
    #gearOverlay .settingTile{
      border:1px solid rgba(137,196,229,.24);
      border-radius:14px;
      padding:8px 6px;
      background:
        radial-gradient(100% 120% at 0% 0%, rgba(92,170,221,.15) 0%, rgba(92,170,221,0) 55%),
        linear-gradient(180deg, rgba(19,38,62,.62) 0%, rgba(13,29,50,.52) 100%);
      min-width:0;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
    }
    #gearOverlay .settingMeta{
      display:flex;
      align-items:center;
      justify-content:center;
    }
    #gearOverlay .toggleLabel{
      color:#d9efff;
      opacity:1;
      line-height:1;
      letter-spacing:.1px;
      font-size:12px;
      font-weight:900;
    }
    #gearOverlay .toggleSwitch{
      border-color: rgba(130,193,232,.35);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.18), 0 6px 12px rgba(0,0,0,.2);
      width:80px;
      height:32px;
    }
    #gearOverlay .toggleSwitch .toggleKnob{
      width:26px;
      height:26px;
      top:3px;
      left:3px;
    }
    #gearOverlay .toggleSwitch.on .toggleKnob{
      transform: translateX(48px);
    }
    #gearOverlay .toggleSwitch .toggleText{
      font-size:11px;
    }
    #gearOverlay .toggleSwitch .toggleText.on{ left:9px; }
    #gearOverlay .toggleSwitch .toggleText.off{ right:9px; }
    #gearOverlay .bigBtn{
      border-color: rgba(130,193,232,.3);
      background: linear-gradient(180deg, rgba(20,44,72,.68) 0%, rgba(16,33,56,.68) 100%);
      color:#d9efff;
    }
    #gearOverlay .bigBtn.ghostBtn{
      background: linear-gradient(180deg, rgba(18,38,62,.52) 0%, rgba(13,30,50,.52) 100%);
    }
    #gearOverlay .bigBtn.dangerBtn{
      background: linear-gradient(180deg, rgba(178,80,80,.65) 0%, rgba(136,58,58,.65) 100%);
      border-color: rgba(255,160,160,.42);
      color:#fff3f3;
    }
    /* keep settings in one horizontal row on small screens */

    /* Leaderboard */
    #leaderboardOverlay{
      align-items:flex-start;
      overflow-y:auto;
      padding-top:max(10px, calc(var(--safe-top) + 10px));
      padding-bottom:max(10px, calc(var(--safe-bottom) + 10px));
    }
    #leaderboardOverlay .card{
      max-height: calc((var(--vh) * 100) - var(--safe-top) - var(--safe-bottom) - 20px);
      display:flex;
      flex-direction:column;
      overflow:hidden;
      background:
        radial-gradient(120% 90% at 12% 0%, rgba(125,200,241,.2) 0%, rgba(125,200,241,0) 52%),
        linear-gradient(160deg, rgba(247,253,255,.98) 0%, rgba(233,246,253,.98) 55%, rgba(221,240,250,.98) 100%);
      border:1px solid rgba(131,188,217,.28);
      box-shadow:
        0 20px 56px rgba(31,87,120,.25),
        inset 0 1px 0 rgba(255,255,255,.65);
    }
    #leaderboardOverlay .row{
      margin-top:10px;
      flex:0 0 auto;
    }
    #leaderboardOverlay .title{
      color:#0f172a;
      text-shadow:none;
    }
    .leaderboardMeta{
      font-size:12px;
      color:#0f172a;
      opacity:1;
      font-weight:800;
      margin: 0 0 10px;
      flex:0 0 auto;
    }
    .leaderboardTabs{
      display:flex;
      gap:8px;
      margin:0 0 10px;
      flex:0 0 auto;
    }
    .leaderboardTabs .bigBtn{
      padding:10px 12px;
      flex:1;
      border-color: rgba(127,186,217,.44);
      background: linear-gradient(180deg, rgba(233,245,252,.95) 0%, rgba(220,238,249,.95) 100%);
      color:#0f172a;
      font-weight:800;
    }
    .leaderboardTabs .bigBtn:not(.ghostBtn){
      border-color: rgba(66,157,209,.7);
      background: linear-gradient(180deg, rgba(154,225,255,.95) 0%, rgba(117,201,242,.95) 100%);
      color:#041827;
      box-shadow: 0 6px 18px rgba(52,131,180,.28);
    }
    .leaderboardBlocks{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin: 0 0 10px;
      flex:1 1 auto;
      min-height:0;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
      overscroll-behavior: contain;
    }
    .leaderboardBlock{
      --lb-right-col: 98px;
      border:1px solid rgba(133,186,212,.36);
      border-radius:14px;
      background: linear-gradient(180deg, rgba(250,254,255,.97) 0%, rgba(237,247,253,.95) 100%);
      padding:10px;
    }
    .leaderboardBlockTitle{
      font-size:16px;
      font-weight:900;
      color:#0f172a;
      margin:0 0 8px;
      text-align:center;
    }
    .leaderboardHeaderRow{
      display:grid;
      grid-template-columns:minmax(0,1fr) var(--lb-right-col);
      align-items:center;
      gap:8px;
      font-size:13px;
      color:#0f172a;
      font-weight:900;
      margin:4px 0 8px;
      border-bottom:1px solid rgba(121,165,189,.28);
      padding-bottom:6px;
    }
    .leaderboardHeaderRow span:first-child{
      text-align:left;
      justify-self:start;
    }
    .leaderboardHeaderRow span:last-child{
      text-align:right;
      justify-self:end;
    }
    .leaderboardMyCard{
      border:1px solid rgba(122,177,209,.36);
      border-radius:10px;
      background: rgba(255,255,255,.55);
      padding:8px;
      margin-bottom:8px;
    }
    .leaderboardMyCard.myHighlight{
      background: linear-gradient(90deg, rgba(255,230,140,.5) 0%, rgba(255,245,205,.28) 100%);
      border-color: rgba(223,175,60,.55);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.45);
    }
    .leaderboardMyCard.empty{
      background: rgba(255,255,255,.55);
      border-color: rgba(122,177,209,.36);
    }
    .leaderboardMyTitle{
      font-size:12px;
      font-weight:900;
      color:#0f172a;
      margin:0 0 6px;
    }
    .leaderboardMyRow{
      display:grid;
      grid-template-columns:minmax(0,1fr) var(--lb-right-col);
      gap:6px;
      align-items:center;
      font-size:12px;
    }
    .leaderboardMyRow .value{
      color:#0f172a;
      font-weight:900;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      text-align:center;
    }
    .leaderboardMyRow .value:first-child{
      text-align:left;
      justify-self:start;
    }
    .leaderboardMyRow .value:last-child{
      text-align:right;
      justify-self:end;
    }
    .rankCrown{
      display:inline-block;
      margin-right:4px;
      font-size:12px;
      line-height:1;
      vertical-align:middle;
    }
    .leaderboardSubTitle{
      margin:0 0 6px;
      font-size:12px;
      font-weight:900;
      color:#0f172a;
      text-transform:uppercase;
      letter-spacing:.2px;
    }
    .leaderboardList{
      margin:0;
      padding:0;
      list-style:none;
      max-height:none;
      overflow:visible;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
      overscroll-behavior: contain;
      font-size:12px;
      line-height:1.35;
      flex:0 0 auto;
      min-height:auto;
      color:#0f172a;
    }
    .leaderboardList li{
      display:grid;
      grid-template-columns:minmax(0,1fr) var(--lb-right-col);
      align-items:center;
      gap:8px;
      border-bottom:1px solid rgba(121,165,189,.26);
      padding:5px 0;
    }
    .leaderboardList li span:first-child{
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      color:#0f172a;
      font-weight:700;
      text-align:left;
      justify-self:start;
    }
    .leaderboardList li span:last-child{
      color:#0f172a;
      font-weight:800;
      flex:0 0 auto;
      text-align:right;
      justify-self:end;
    }
    .leaderboardList .leaderboardSection{
      margin-top:4px;
      padding:6px 0 5px;
      border-bottom:1px solid rgba(15,23,42,.24);
    }
    .leaderboardList .leaderboardSection span:first-child{
      color:#000;
      font-weight:900;
    }
    .leaderboardList .leaderboardSection span:last-child{
      color:#111;
      font-size:11px;
      font-weight:800;
    }
    .leaderboardList .leaderboardEmpty span:first-child{
      color:#334155;
      font-weight:700;
    }
    .leaderboardList .myRankRow{
      background: linear-gradient(90deg, rgba(255,230,140,.5) 0%, rgba(255,245,205,.28) 100%);
      border-bottom-color: rgba(223,175,60,.55);
      border-radius:10px;
      padding:6px 8px;
      margin:2px 0;
    }
    .leaderboardList li:last-child{ border-bottom:none; }
    .leaderboardList .me{
      color:#0b4f8d;
      font-weight:900;
      text-shadow:none;
    }
    .leaderboardList .meAround span:first-child,
    .leaderboardList .meAround span:last-child{
      color:#ff8a00;
      font-weight:900;
    }
    @media (max-width: 720px){
      .leaderboardMyRow{ font-size:11px; }
    }
    @media (max-height: 760px){
      #leaderboardOverlay .card{ padding:12px; }
      .leaderboardMeta{ margin:0 0 8px; font-size:11px; }
      .leaderboardTabs{ margin:0 0 8px; }
      .leaderboardTabs .bigBtn{ padding:8px 10px; }
      .leaderboardBlock{ padding:8px; }
      .leaderboardBlockTitle{ margin:0 0 6px; font-size:14px; }
      .leaderboardList{ font-size:11px; line-height:1.28; }
      .leaderboardList li{ padding:4px 0; }
    }
  </style>
</head>

<body>
  <div id="app">
    <div id="logoSplash" aria-hidden="true">
      <img
        id="logoSplashImage"
        class="logoMark"
        src="./asset/images/ui/logo/game cop_logo.png"
        alt="company logo"
        onerror="this.onerror=null;this.src='./asset/images/ui/logo/logo_pengtal.png';"
      />
    </div>
    <div id="bg" class="bg-home"></div>
    <div id="bgBlur" class="show"></div>

    <img id="splashLogo" src="./asset/images/ui/logo/logo_pengtal.png" alt="logo"/>
    <div id="splashHint" role="button" tabindex="0" aria-label="tap to start">TAP TO START</div>

    <!-- Top bar -->
    <div id="topBar">
      <div class="leftGroup">
        <div class="goldStack">
          <div class="pill" id="goldPill">
            <img class="goldPillBg" src="./asset/images/ui/btn_gold.png" alt="gold"/>
            <span id="goldText">0</span>
            <button id="goldPlus" aria-label="open shop"></button>
          </div>
          <button id="btnJam" class="jamBtn" aria-label="jam">
            <img src="./asset/images/ui/btn_jam.png" alt="jam"/>
            <span id="jamText" class="jamText">0</span>
          </button>
        </div>
      </div>

      <!-- ✅ 홈에서는 숨김 처리됨 (game.js에서 display 제어) -->
      <div class="pill" id="stagePill">
        <div class="modeText" id="modeText">STAGE</div>
        <div class="levelText" id="stagePillText">LEVEL 1</div>
      </div>

      <div class="rightGroup">
        <button id="btnSetting" aria-label="setting">
          <img src="./asset/images/ui/new_btn/new_btn_setting.png" alt="setting"/>
        </button>
      </div>
    </div>

    <!-- HOME -->
    <div id="homeLayer">
      <div id="homeSlides" aria-hidden="true">
        <div id="homeSlidesTrack">
          <section class="homeScreen screen-shop">
            <div class="homeScreenContent">
              <div class="homeNavPanel shopPanel">
                <div class="title">shop</div>
                <div class="moneyBar">
                  <div class="pill"><img class="shopCurrencyIcon" src="./asset/images/shop/currency_coin.png?v=20260226j" alt="gold"><span id="inlineShopGoldText">0</span></div>
                  <div class="pill"><img class="shopCurrencyIcon" src="./asset/images/shop/currency_dia.png?v=20260226j" alt="gem"><span id="inlineShopGemText">0</span></div>
                </div>
                <div class="shopSheet">
                  <div class="shopBlock useBlockBg blockSingle bgAdd">
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue small" id="inlineAdRemoveLabel">광고제거</div>
                      <button id="btnInlineBuyAdRemove" class="shopBuyBtn">₩6,600</button>
                    </div>
                  </div>
                  <div class="shopBreak">
                    <img src="./asset/images/shop/block_line.png?v=20260226k" alt="line">
                  </div>
                  <div class="shopBlock useBlockBg blockSingle bgGold01">
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">120</div>
                      <button id="btnInlineShopDailyGold" class="shopBuyBtn ghost">무료</button>
                    </div>
                  </div>
                  <div class="shopBreak">
                    <img src="./asset/images/shop/block_line.png?v=20260226k" alt="line">
                  </div>
                  <div class="shopBlock useBlockBg blockTripleGold bgGold02">
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">1000</div>
                      <button id="btnInlineBuyGold1000" class="shopBuyBtn">₩3,300</button>
                    </div>
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">3000</div>
                      <button id="btnInlineBuyGold3000" class="shopBuyBtn">₩6,600</button>
                    </div>
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">5000</div>
                      <button id="btnInlineBuyGold5000" class="shopBuyBtn">₩9,900</button>
                    </div>
                  </div>
                  <div class="shopBlock useBlockBg blockTripleDia bgDia01">
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">100</div>
                      <button id="btnInlineBuyGem100" class="shopBuyBtn">₩5,500</button>
                    </div>
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">500</div>
                      <button id="btnInlineBuyGem500" class="shopBuyBtn">₩10,500</button>
                    </div>
                    <div class="shopItemRow">
                      <span class="shopIconSpacer" aria-hidden="true"></span>
                      <div class="shopValue">1000</div>
                      <button id="btnInlineBuyGem1000" class="shopBuyBtn">₩17,900</button>
                    </div>
                  </div>
                </div>
                <div class="shopFooterDesc" id="inlineShopDesc">구매 완료 시 즉시 보상이 지급됩니다.</div>
              </div>
            </div>
          </section>
          <section class="homeScreen screen-event">
            <div class="homeScreenContent">
              <div>
                <div class="homeScreenTitle">이벤트</div>
                <div class="homeScreenSubtitle">준비중</div>
              </div>
            </div>
          </section>
          <section class="homeScreen screen-home">
            <div class="homePenguinStage" aria-hidden="true">
              <div class="homePenguinShadow"></div>
              <img
                id="homePenguinPreview"
                src="./asset/images/penguin/home_penguin_default.png"
                alt="home penguin preview"
                onerror="this.onerror=null;this.src='./asset/images/piece/penguin_0.png';"
              />
            </div>
          </section>
          <section class="homeScreen screen-ranking">
            <div class="homeScreenContent">
              <div class="homeNavPanel">
                <div class="title">랭킹</div>
                <div id="inlineLeaderboardMeta" class="leaderboardMeta">스테이지 랭킹</div>
                <div class="leaderboardTabs">
                  <button id="btnInlineLeaderboardStage" class="bigBtn">스테이지</button>
                  <button id="btnInlineLeaderboardDaily" class="bigBtn ghostBtn">도전</button>
                </div>
                <div id="inlineLeaderboardBody" class="leaderboardBlocks"></div>
              </div>
            </div>
          </section>
          <section class="homeScreen screen-costume">
            <div class="homeScreenContent">
              <div class="homeNavPanel shopPanel costumeShopPanel">
                <div class="title">costume</div>
                <div class="moneyBar">
                  <div class="pill">
                    <img class="shopCurrencyIcon" src="./asset/images/shop/currency_coin.png?v=20260226j" alt="gold">
                    <span id="costumeGoldText">0</span>
                  </div>
                  <div class="pill">
                    <img class="shopCurrencyIcon" src="./asset/images/shop/currency_dia.png?v=20260226j" alt="gem">
                    <span id="costumeGemText">0</span>
                  </div>
                </div>
                <div id="costumeGrid"></div>
                <div id="costumeDesc" class="shopFooterDesc">1번은 기본 펭귄입니다. 나머지 15종은 다이아로 해금할 수 있어요.</div>
              </div>
            </div>
          </section>
        </div>
      </div>

      <div id="homeButtons">
        <div class="homeBtnWrap">
          <button id="btnStage" class="homeBigBtn">
            <img src="./asset/images/ui/btn_play.png" alt="play"/>
          </button>
          <div class="homeBtnLabel" id="stageLabel">LEVEL 1</div>
        </div>

        <div class="homeBtnWrap">
          <button id="btnDaily" class="homeBigBtn">
            <img src="./asset/images/ui/btn_daily.png" alt="daily"/>
          </button>
          <div class="homeBtnLabel" id="dailyLabel">일일 도전</div>
        </div>
      </div>

      <div id="homeNav">
        <button id="btnNavShop" class="navBtn" aria-label="shop">
          <span class="navIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M3 7h18"></path>
              <path d="M5 7v11a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7"></path>
              <path d="m7 7 1.2-3a1.8 1.8 0 0 1 1.67-1.1h4.26A1.8 1.8 0 0 1 15.8 4L17 7"></path>
              <path d="M9 13h6"></path>
            </svg>
          </span>
          <span class="navLabel">상점</span>
        </button>
        <button id="btnNavEvent" class="navBtn" aria-label="event">
          <span class="navIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <rect x="3" y="8" width="18" height="4" rx="1"></rect>
              <path d="M12 8v13"></path>
              <path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"></path>
              <path d="M12 8H7.5a2.5 2.5 0 1 1 0-5C11 3 12 8 12 8Z"></path>
              <path d="M12 8h4.5a2.5 2.5 0 1 0 0-5C13 3 12 8 12 8Z"></path>
            </svg>
          </span>
          <span class="navLabel">이벤트</span>
        </button>
        <button id="btnNavHome" class="navBtn" aria-label="home">
          <span class="navIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M3 11 12 4l9 7"></path>
              <path d="M5 10v10h14V10"></path>
              <path d="M10 20v-5h4v5"></path>
            </svg>
          </span>
          <span class="navLabel">홈</span>
        </button>
        <button id="btnNavRank" class="navBtn" aria-label="ranking">
          <span class="navIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M8 21h8"></path>
              <path d="M12 17v4"></path>
              <path d="M7 4h10v4a5 5 0 0 1-10 0V4z"></path>
              <path d="M5 6a2 2 0 0 0 0 4h2"></path>
              <path d="M19 6a2 2 0 0 1 0 4h-2"></path>
            </svg>
          </span>
          <span class="navLabel">랭킹</span>
        </button>
        <button id="btnNavCostume" class="navBtn" aria-label="costume">
          <span class="navIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path d="M8 3 6 6 3 8l2 4 3-2v10h8V10l3 2 2-4-3-2-2-3z"></path>
            </svg>
          </span>
          <span class="navLabel">코스튬</span>
        </button>
      </div>
    </div>

    <!-- GAME -->
    <div id="gameLayer">
      <div id="gameWrap">
        <canvas id="c"></canvas>
      </div>

      <div id="bottomBar">
        <button id="btnUndo" class="actionBtn undo" aria-label="undo">
          <span class="actionIcon iconUndo" aria-hidden="true"></span>
        </button>
        <div class="actionStack">
          <button id="btnHint" class="actionBtn hint" aria-label="hint">
            <span class="actionIcon iconHint" aria-hidden="true"></span>
          </button>
          <span class="hintPriceTag" aria-hidden="true">
            <img class="hintPriceBg" src="./asset/images/ui/btn_hint_gold.png" alt="gold"/>
            <span class="hintPriceText"></span>
          </span>
        </div>
      </div>
    </div>

    <!-- Toast -->
      <div id="toast"><div class="bubble" id="toastText">토스트</div></div>

    <!-- Tutorial focus dim -->
    <div id="tutorialFocus"></div>

    <!-- Tutorial Coach -->
    <div id="tutorialCoach">
      <div class="coachCard">
        <button id="btnTutorialSkip" class="tutorialSkipMini">Skip</button>
        <div class="coachTitle" id="tutorialCoachTitle">튜토리얼</div>
        <div class="coachDesc" id="tutorialCoachDesc">설명</div>
        <div id="tutorialVisual" class="tutorialVisual hero" aria-hidden="true"></div>
        <div class="rowBetween">
          <button id="btnTutorialPrev" class="bigBtn ghostBtn">이전</button>
          <button id="btnTutorialAction" class="bigBtn" style="display:none;">다음</button>
        </div>
      </div>
    </div>

    <!-- Privacy cover -->
    <div id="privacyCover"></div>

    <!-- Loading -->
    <div id="loadingOverlay" class="overlay">
      <div class="card">
        <div class="loadingWrap">
          <div class="loadingPenguin" aria-hidden="true"></div>
          <div class="loadingText">로딩중</div>
        </div>
      </div>
    </div>

    <!-- Settings -->
    <div id="gearOverlay" class="overlay">
      <div class="card">
        <div class="title">설정</div>
        <div class="desc" id="gearDesc">설정/화면 보호 중</div>
        <div class="settingsPanel">
          <div class="settingTile">
            <div class="settingMeta">
              <div class="toggleLabel">BGM</div>
            </div>
            <button id="btnSound" class="toggleSwitch off" aria-pressed="false" aria-label="BGM toggle">
              <span class="toggleKnob"></span>
              <span class="toggleText on">ON</span>
              <span class="toggleText off">OFF</span>
            </button>
          </div>
          <div class="settingTile">
            <div class="settingMeta">
              <div class="toggleLabel">효과음</div>
            </div>
            <button id="btnSfx" class="toggleSwitch off" aria-pressed="false" aria-label="SFX toggle">
              <span class="toggleKnob"></span>
              <span class="toggleText on">ON</span>
              <span class="toggleText off">OFF</span>
            </button>
          </div>
          <div class="settingTile">
            <div class="settingMeta">
              <div class="toggleLabel">진동</div>
            </div>
            <button id="btnVibe" class="toggleSwitch off" aria-pressed="false" aria-label="vibe toggle">
              <span class="toggleKnob"></span>
              <span class="toggleText on">ON</span>
              <span class="toggleText off">OFF</span>
            </button>
          </div>
        </div>
        <div class="rowBetween" style="margin-bottom:10px;">
          <button id="btnTutorial" class="bigBtn">튜토리얼 보기</button>
          <button id="btnProfile" class="bigBtn ghostBtn">프로필</button>
        </div>
        <div class="row" style="margin-bottom:8px;">
          <button id="btnPrivacyNotice" class="bigBtn ghostBtn">처리방침 안내</button>
        </div>
        <div class="row">
          <button id="btnGoHome" class="bigBtn dangerBtn">홈으로</button>
        </div>
        <div class="row" style="margin-top:10px;">
          <button id="btnCloseGear" class="bigBtn ghostBtn">닫기</button>
        </div>
      </div>
    </div>

    <!-- Shop -->
    <div id="shopOverlay" class="overlay">
      <div class="card">
        <div class="title">shop</div>
        <button id="btnCloseShop" class="shopCloseX" type="button" aria-label="close shop">×</button>

        <div class="moneyBar">
          <div class="pill"><img class="shopCurrencyIcon" src="./asset/images/shop/currency_coin.png?v=20260226j" alt="gold"><span id="shopGoldText">0</span></div>
          <div class="pill"><img class="shopCurrencyIcon" src="./asset/images/shop/currency_dia.png?v=20260226j" alt="gem"><span id="shopGemText">0</span></div>
        </div>

        <div class="shopSheet" style="max-height:52vh;">
          <div class="shopBlock useBlockBg blockSingle bgAdd">
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue small" id="shopAdRemoveLabel">광고제거</div>
              <button id="btnBuyAdRemove" class="shopBuyBtn">₩6,600</button>
            </div>
          </div>
          <div class="shopBreak">
            <img src="./asset/images/shop/block_line.png?v=20260226k" alt="line">
          </div>
          <div class="shopBlock useBlockBg blockSingle bgGold01">
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">120</div>
              <button id="btnShopDailyGold" class="shopBuyBtn ghost">무료</button>
            </div>
          </div>
          <div class="shopBreak">
            <img src="./asset/images/shop/block_line.png?v=20260226k" alt="line">
          </div>
          <div class="shopBlock useBlockBg blockTripleGold bgGold02">
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">1000</div>
              <button id="btnBuyGold1000" class="shopBuyBtn">₩3,300</button>
            </div>
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">3000</div>
              <button id="btnBuyGold3000" class="shopBuyBtn">₩6,600</button>
            </div>
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">5000</div>
              <button id="btnBuyGold5000" class="shopBuyBtn">₩9,900</button>
            </div>
          </div>
          <div class="shopBlock useBlockBg blockTripleDia bgDia01">
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">100</div>
              <button id="btnBuyGem100" class="shopBuyBtn">₩5,500</button>
            </div>
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">500</div>
              <button id="btnBuyGem500" class="shopBuyBtn">₩10,500</button>
            </div>
            <div class="shopItemRow">
              <span class="shopIconSpacer" aria-hidden="true"></span>
              <div class="shopValue">1000</div>
              <button id="btnBuyGem1000" class="shopBuyBtn">₩17,900</button>
            </div>
          </div>
        </div>
        <div class="desc" id="shopDesc" style="margin-top:8px;">구매 완료 시 즉시 보상이 지급됩니다.</div>

      </div>
    </div>

    <!-- Daily Select -->
    <div id="dailySelectOverlay" class="overlay">
      <div class="card dailySelectCard">
        <div class="title">일일 도전</div>
        <div class="desc" id="dailySelectDesc">오늘의 3단계 도전!</div>
        <div class="dailyRewardGuide">
          <div class="dailyGuideHead">
            <div class="dailyGuideTitle">오늘의 진척도</div>
            <button id="btnDailyInfo" class="dailyInfoBtn" type="button" aria-label="일일도전 보상 안내">i</button>
          </div>
          <canvas id="dailyProgressCanvas" class="dailyProgressCanvas" aria-label="일일도전 진척도"></canvas>
        </div>
        <div class="dailyStageGrid">
          <button id="btnDaily1" class="bigBtn dailyStageBtn" type="button">1단계</button>
          <button id="btnDaily2" class="bigBtn dailyStageBtn" type="button">2단계</button>
          <button id="btnDaily3" class="bigBtn dailyStageBtn" type="button">3단계</button>
        </div>
        <div class="row dailySelectCloseRow">
          <button id="btnCloseDailySelect" class="bigBtn ghostBtn">닫기</button>
        </div>
      </div>
    </div>

    <!-- Tutorial -->
    <div id="tutorialOverlay" class="overlay">
      <div class="card">
        <div class="title">튜토리얼</div>
        <div class="desc" id="tutorialText">
1) 펭귄을 드래그해서 상/하/좌/우로 미끄러뜨려요.
2) 장애물(바위)이나 다른 펭귄에서 멈춰요.
3) 주인공(0번 펭귄)을 가운데 목표 지점에 넣으면 클리어!
4) 무르기(UNDO)는 무한, 힌트는 1회 100골드를 사용해요.
5) 골드가 부족하면 상점에서 골드를 획득할 수 있어요.
        </div>
        <div class="rowBetween">
          <button id="btnTutorialClose" class="bigBtn">확인</button>
        </div>
      </div>
    </div>

    <!-- Tutorial clear transition -->
    <div id="tutorialClearOverlay" class="overlay">
      <div class="card">
        <div class="title">튜토리얼 성공</div>
        <div class="desc" id="tutorialClearDesc">성공! 다음 튜토리얼로 이동합니다.</div>
        <div class="row">
          <button id="btnTutorialClearNext" class="bigBtn">다음</button>
        </div>
      </div>
    </div>

    <!-- First login choice -->
    <div id="loginGateOverlay" class="overlay">
      <div class="card">
        <div class="title">아이디 만들기</div>
        <div class="desc" id="loginGateDesc">랭킹에 표시할 아이디(닉네임)를 입력해주세요.</div>
        <input id="loginGateNicknameInput" class="textInput" type="text" maxlength="24" autocomplete="off" placeholder="아이디 입력 (최대 24자)">
        <div class="row" style="margin-bottom:6px;">
          <button id="btnLoginGateSaveNickname" class="bigBtn">아이디 저장</button>
        </div>
        <div class="inlineHint">이미 아이디가 있으신가요? <button id="btnLoginGateLinkAccount" class="linkBtn">계정연동하러가기</button></div>
      </div>
    </div>

    <!-- Profile / Save -->
    <div id="profileOverlay" class="overlay">
      <div class="card">
        <div class="title">프로필</div>
        <div class="desc" id="profileDesc">계정 연동으로 클라우드 저장/동기화를 사용할 수 있어요.</div>
        <div class="profileIdRow">
          <span class="profileIdLabel">아이디 :</span>
          <span id="profileNicknameValue" class="profileIdValue">-</span>
          <button id="btnEditNickname" class="iconBtn" aria-label="아이디 수정">✎</button>
        </div>
        <div class="rowBetween" style="margin-bottom:10px;">
          <button id="btnSetUserId" class="bigBtn">계정 연동</button>
          <button id="btnUseGuest" class="bigBtn ghostBtn">로그아웃</button>
        </div>
        <div class="row">
          <button id="btnCloseProfile" class="bigBtn ghostBtn">닫기</button>
        </div>
      </div>
    </div>

    <!-- Nickname Edit -->
    <div id="nicknameEditOverlay" class="overlay">
      <div class="card">
        <div class="title">아이디 수정</div>
        <div class="desc" id="nicknameEditDesc">랭킹에 표시될 아이디를 수정합니다.</div>
        <input id="nicknameEditInput" class="textInput" type="text" maxlength="24" autocomplete="off" placeholder="아이디 입력 (최대 24자)">
        <div class="rowBetween" style="margin-bottom:10px;">
          <button id="btnNicknameEditSave" class="bigBtn">저장</button>
          <button id="btnCloseNicknameEdit" class="bigBtn ghostBtn">취소</button>
        </div>
      </div>
    </div>

    <!-- Account Link -->
    <div id="accountLinkOverlay" class="overlay">
      <div class="card">
        <div class="title">계정 연동</div>
        <div class="desc">연동할 계정을 선택해주세요.</div>
        <div class="rowBetween" style="margin-bottom:10px;">
          <button id="btnLinkGoogle" class="bigBtn">Google</button>
        </div>
        <div class="row">
          <button id="btnCloseAccountLink" class="bigBtn ghostBtn">닫기</button>
        </div>
      </div>
    </div>

    <!-- Leaderboard -->
    <div id="leaderboardOverlay" class="overlay">
      <div class="card">
        <div class="title">랭킹</div>
        <div class="leaderboardMeta" id="leaderboardMeta">로딩 중...</div>
        <div class="leaderboardTabs">
          <button id="btnLeaderboardStage" class="bigBtn">스테이지</button>
          <button id="btnLeaderboardDaily" class="bigBtn ghostBtn">도전</button>
        </div>
        <div id="leaderboardBody" class="leaderboardBlocks"></div>
        <div class="row">
          <button id="btnCloseLeaderboard" class="bigBtn ghostBtn">닫기</button>
        </div>
      </div>
    </div>

    <!-- Info -->
    <div id="infoOverlay" class="overlay">
      <div class="card">
        <div class="title" id="infoTitle">안내</div>
        <div class="desc" id="infoDesc">내용</div>
        <div class="row">
          <button id="btnInfoOk" class="bigBtn">확인</button>
        </div>
      </div>
    </div>

    <!-- Fail -->
    <div id="failOverlay" class="overlay">
      <div class="resultWrap">
        <div class="failBubbles">
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
        </div>
        <div class="failBadge" aria-hidden="true"></div>
        <div class="resultTitle">실패</div>
        <div class="resultDesc">다시 도전해볼까요?</div>
        <div class="resultBtns">
          <button id="btnFailRetry" class="resultBtn">다시하기</button>
        </div>
      </div>
    </div>

    <!-- Clear -->
    <div id="clearOverlay" class="overlay">
      <div class="resultWrap">
        <canvas id="clearFxCanvas" class="clearFxCanvas" aria-hidden="true"></canvas>
        <div class="clearSparkles">
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
          <span class="spark"></span>
        </div>
        <div class="heroBadge" aria-hidden="true"></div>
        <div class="resultTitle">CLEAR!</div>
        <div class="resultDesc" id="clearDesc">보상</div>
        <div class="resultBtns">
          <button id="btnClearHome" class="resultBtn reward">보상받기</button>
          <div style="display:flex; flex-direction:column; align-items:center;">
            <div class="adTag"><img class="adIcon" src="./asset/images/ui/icon_add_01.png" alt="" aria-hidden="true"/></div>
            <button id="btnClearNext" class="resultBtn x2">X2 받기</button>
          </div>
        </div>
      </div>
    </div>

    <audio id="bgm" src="./asset/bgm.mp3" loop></audio>

    <script>
      window.PE_SUPABASE_URL = "https://gfyarbdwxzbszwqewbxx.supabase.co";
      window.PE_SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeWFyYmR3eHpic3p3cWV3Ynh4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3MjI0MzEsImV4cCI6MjA4NjI5ODQzMX0.ezsfFQp5PPAbZ2uxOZxx2zoj0ufvk9u9ts6akGPD2Tc";
    </script>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./supabase-adapter.js"></script>
  <script src="./ad-adapter.js"></script>
  <script src="./game.js"></script>
</body>
</html>
