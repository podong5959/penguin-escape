<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>PENGUIN ESCAPE</title>
  <style>
    :root{
      --design-w:402;
      --design-h:874;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
    }

    html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;}
    #app{position:fixed;inset:0;background:#061018;}
    /* ë°°ê²½(ìƒíƒœë³„) */
    #bg{
      position:absolute;inset:0;
      background:#061018;
      background-size:cover;
      background-position:center;
      filter:saturate(1.05);
    }
    #bg.bg-home{ background-image:url("./asset/images/bg/home.png"); }
    #bg.bg-sea{ background-image:url("./asset/images/bg/sea.png"); }
    #bg.bg-splash{ background-image:url("./asset/images/bg/splash_bg.png"); }
    #bg::after{
      content:"";
      position:absolute;inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.55));
    }

    /* ë””ìì¸ í”„ë ˆì„(402x874) ìŠ¤ì¼€ì¼ë§ */
    #frameWrap{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      padding:0;
    }
    #frame{
      position:relative;
      width:calc(var(--design-w) * 1px);
      height:calc(var(--design-h) * 1px);
      transform-origin:center center;
      will-change:transform;
    }

    /* ìº”ë²„ìŠ¤ */
    #c{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width:360px;
      height:360px;
      border-radius:18px;
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.10);
      box-shadow:0 18px 70px rgba(0,0,0,.35);
      touch-action:none;
      display:none; /* HOMEì—ì„  ìˆ¨ê¹€ */
    }

    /* ê³µí†µ: ì´ë¯¸ì§€ ë²„íŠ¼ */
    .imgBtn{
      position:absolute;
      appearance:none;
      border:0;
      padding:0;
      margin:0;
      background:transparent;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }
    .imgBtn:active{ transform:translateY(1px); }
    .imgBtn img{
      width:100%;
      height:100%;
      display:block;
      pointer-events:none;
      image-rendering:auto;
    }

    /* ìƒë‹¨ UI */
    #btnSetting{
      right:20px;
      top:17px;
      width:50px; height:50px;
      display:none; /* HOMEì—ì„  ìˆ¨ê¹€ */
    }

    #currency{
      position:absolute;
      left:18px;
      top:16px;
      display:flex;
      gap:10px;
      align-items:center;
      color:#e9f5ff;
      font-weight:900;
      font-size:14px;
      text-shadow:0 2px 10px rgba(0,0,0,.35);
      display:none; /* HOMEì—ì„  ìˆ¨ê¹€ */
    }
    .curPill{
      display:flex; gap:8px; align-items:center;
      padding:8px 10px;
      border-radius:999px;
      background:rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(8px);
    }
    .curIcon{
      width:18px;height:18px;border-radius:6px;
      background:rgba(255,255,255,.18);
      display:grid;place-items:center;
      font-size:12px;
    }
    .curNum{
      min-width:64px;
      text-align:right;
      letter-spacing:.2px;
    }

    /* í•˜ë‹¨: ë ˆë²¨/ì¼ì¼ ë²„íŠ¼ */
    #btnStage{
      left:50px;
      bottom:247px;
      width:144px; height:80px;
      display:none; /* HOME ì „ìš© */
    }
    #btnDaily{
      right:50px;
      bottom:247px;
      width:144px; height:80px;
      display:none; /* HOME ì „ìš© */
    }
    .btnLabel{
      position:absolute;
      left:0; top:0;
      width:100%; height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-weight:1000;
      text-shadow:0 2px 12px rgba(0,0,0,.55);
      letter-spacing:.2px;
      pointer-events:none;
    }
    #stageLabel{ font-size:18px; }
    #dailyLabel{ font-size:18px; }

    /* í•˜ë‹¨ ë„¤ë¹„(ìƒì /í™ˆ/ì´ë²¤íŠ¸) */
    #nav{
      position:absolute;
      left:50%;
      bottom:110px;
      transform:translateX(-50%);
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:center;
      display:none; /* HOME ì „ìš© */
    }
    .navBtn{ width:90px; height:60px; position:relative; }
    .navBtn img{ width:90px; height:60px; }

    /* ê²Œì„ í•˜ë‹¨(ë¬´ë¥´ê¸°/íŒíŠ¸) */
    #btnUndo{
      left:50%;
      bottom:40px;
      transform:translateX(-110px);
      width:120px; height:60px;
      display:none;
    }
    #btnHint{
      left:50%;
      bottom:40px;
      transform:translateX(10px);
      width:120px; height:60px;
      display:none;
    }
    .countBadge{
      position:absolute;
      right:10px;
      top:8px;
      padding:3px 8px;
      border-radius:999px;
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.16);
      color:#fff;
      font-size:12px;
      font-weight:900;
      text-shadow:0 2px 10px rgba(0,0,0,.35);
      pointer-events:none;
    }

    /* ìŠ¤í”Œë˜ì‹œ ë¡œê³  */
    #splashLogo{
      position:absolute;
      left:50%;
      top:45%;
      transform:translate(-50%,-50%);
      width:240px;
      height:auto;
      display:none;
    }

    /* ì˜¤ë²„ë ˆì´(íŒì—…/ì„¤ì •/ìƒì /ê²°ê³¼/êµ¬ë§¤) */
    .overlay{
      position:absolute; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,.60);
      backdrop-filter: blur(10px);
    }
    .overlay.show{ display:flex; }

    .card{
      width:320px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(10,18,28,.92);
      box-shadow:0 20px 80px rgba(0,0,0,.45);
      padding:16px;
      color:#e9f5ff;
    }
    .title{font-size:18px;font-weight:1000;margin:0 0 10px}
    .desc{font-size:13px;opacity:.88;margin:0 0 14px;line-height:1.55;white-space:pre-line}
    .row{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
    .rowBetween{display:flex;gap:10px;justify-content:space-between;margin-top:12px}

    .btn{
      flex:1;
      padding:14px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.10);
      color:#e9f5ff;
      font-weight:1000;
      cursor:pointer;
    }
    .btn.ghost{ background:rgba(255,255,255,.06); }
    .btn:active{ transform:translateY(1px); }

    /* í† ìŠ¤íŠ¸ */
    #toast{
      position:absolute;
      left:0; right:0;
      bottom:150px;
      display:flex;
      justify-content:center;
      pointer-events:none;
    }
    #toast > div{
      opacity:0;
      transform:translateY(8px);
      transition:all .18s ease;
      padding:10px 14px;
      border-radius:999px;
      background:rgba(0,0,0,.45);
      border:1px solid rgba(255,255,255,.15);
      color:#fff;
      font-size:14px;
      backdrop-filter: blur(8px);
    }
    #toast.show > div{ opacity:1; transform:translateY(0); }

    /* í”„ë¼ì´ë²„ì‹œ ì»¤ë²„(ì„¤ì •/ë°±ê·¸ë¼ìš´ë“œ ì‹œ ê²Œì„ ì•ˆ ë³´ì´ê²Œ) */
    #privacyCover{
      position:absolute; inset:0;
      display:none;
      background:rgba(0,0,0,.92);
      color:#fff;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
      z-index:80;
    }
    #privacyCover.show{ display:flex; }
    #privacyCover .pcBox{
      width:320px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:20px;
      background:rgba(255,255,255,.06);
      padding:18px;
    }
    #privacyCover .pcTitle{ font-weight:1000; font-size:16px; margin-bottom:8px; }
    #privacyCover .pcDesc{ opacity:.85; font-size:13px; line-height:1.55; white-space:pre-line; }
  </style>
</head>
<body>
<div id="app">
  <div id="bg" class="bg-splash"></div>

  <div id="frameWrap">
    <div id="frame">
      <img id="splashLogo" src="./asset/images/ui/logo/logo_pengtal.png" alt="logo" />

      <canvas id="c" width="720" height="720"></canvas>

      <!-- ìƒë‹¨ -->
      <div id="currency">
        <div class="curPill"><span class="curIcon">ğŸŸ¡</span><span class="curNum" id="goldText">0</span></div>
        <div class="curPill"><span class="curIcon">ğŸ’</span><span class="curNum" id="gemText">0</span></div>
      </div>
      <button class="imgBtn" id="btnSetting" aria-label="ì„¤ì •">
        <img src="./asset/images/ui/btn_setting.png" alt="setting" />
      </button>

      <!-- HOME ë²„íŠ¼ë“¤ -->
      <button class="imgBtn" id="btnStage" aria-label="ìŠ¤í…Œì´ì§€">
        <img src="./asset/images/ui/btn_play.png" alt="stage" />
        <div class="btnLabel" id="stageLabel">LEVEL 1</div>
      </button>

      <button class="imgBtn" id="btnDaily" aria-label="ì¼ì¼ ë„ì „">
        <img src="./asset/images/ui/btn_daily.png" alt="daily" />
        <div class="btnLabel" id="dailyLabel">ì¼ì¼ ë„ì „</div>
      </button>

      <div id="nav">
        <button class="imgBtn navBtn" id="btnNavShop" aria-label="ìƒì ">
          <img src="./asset/images/ui/btn_shop.png" alt="shop" />
        </button>
        <button class="imgBtn navBtn" id="btnNavHome" aria-label="í™ˆ">
          <img src="./asset/images/ui/btn_home.png" alt="home" />
        </button>
        <button class="imgBtn navBtn" id="btnNavEvent" aria-label="ì´ë²¤íŠ¸">
          <img src="./asset/images/ui/btn_event.png" alt="event" />
        </button>
      </div>

      <!-- ê²Œì„ í•˜ë‹¨ -->
      <button class="imgBtn" id="btnUndo" aria-label="ë¬´ë¥´ê¸°">
        <img src="./asset/images/ui/btn_undo.png" alt="undo" />
        <div class="countBadge" id="undoCnt">0</div>
      </button>
      <button class="imgBtn" id="btnHint" aria-label="íŒíŠ¸">
        <img src="./asset/images/ui/btn_hint.png" alt="hint" />
        <div class="countBadge" id="hintCnt">0</div>
      </button>

      <!-- í† ìŠ¤íŠ¸ -->
      <div id="toast"><div id="toastText"></div></div>

      <!-- í”„ë¼ì´ë²„ì‹œ ì»¤ë²„(ì„¤ì •/ë°±ê·¸ë¼ìš´ë“œ) -->
      <div id="privacyCover">
        <div class="pcBox">
          <div class="pcTitle">í™”ë©´ ë³´í˜¸ ì¤‘</div>
          <div class="pcDesc">ì„¤ì •/ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì—ì„œëŠ”\nê²Œì„ í™”ë©´ì´ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
        </div>
      </div>

      <!-- ì„¤ì • ì˜¤ë²„ë ˆì´ -->
      <div class="overlay" id="gearOverlay">
        <div class="card">
          <div class="title">ì„¤ì •</div>
          <div class="desc" id="gearDesc">í”Œë ˆì´ ì¤‘ ë©”ë‰´</div>
          <div class="row" style="justify-content:stretch;flex-direction:column;">
            <button class="btn" id="btnSound">BGM: ON</button>
            <button class="btn ghost" id="btnRestart">ë‹¤ì‹œí•˜ê¸°</button>
            <button class="btn ghost" id="btnGoHome">í™ˆìœ¼ë¡œ</button>
            <button class="btn ghost" id="btnCloseGear">ë‹«ê¸°</button>
          </div>
        </div>
      </div>

      <!-- ìƒì  ì˜¤ë²„ë ˆì´ -->
      <div class="overlay" id="shopOverlay">
        <div class="card">
          <div class="title">ìƒì </div>
          <div class="desc">ê³¨ë“œë¡œ ì•„ì´í…œì„ êµ¬ë§¤í•  ìˆ˜ ìˆì–´ìš”.</div>
          <div class="row" style="justify-content:stretch;flex-direction:column;">
            <button class="btn" id="buyUndo">ë¬´ë¥´ê¸° +1 (100ê³¨ë“œ)</button>
            <button class="btn" id="buyHint">íŒíŠ¸ +1 (100ê³¨ë“œ)</button>
            <button class="btn ghost" id="btnCloseShop">ë‹«ê¸°</button>
          </div>
        </div>
      </div>

      <!-- êµ¬ë§¤ ì™„ë£Œ íŒì—… -->
      <div class="overlay" id="purchaseOverlay">
        <div class="card">
          <div class="title">êµ¬ë§¤ ì™„ë£Œ!</div>
          <div class="desc" id="purchaseText">â€”</div>
          <div class="row">
            <button class="btn" id="btnPurchaseOk">í™•ì¸</button>
          </div>
        </div>
      </div>

      <!-- ì¸ê²Œì„ êµ¬ë§¤ ìœ ë„(ë¬´ë¥´ê¸°/íŒíŠ¸ ì—†ì„ ë•Œ) -->
      <div class="overlay" id="needItemOverlay">
        <div class="card">
          <div class="title" id="needItemTitle">ì•„ì´í…œì´ ë¶€ì¡±í•´ìš”</div>
          <div class="desc" id="needItemDesc">ê³¨ë“œë¥¼ ì‚¬ìš©í•´ êµ¬ë§¤í• ê¹Œìš”?</div>
          <div class="rowBetween">
            <button class="btn ghost" id="btnNeedCancel">ì·¨ì†Œ</button>
            <button class="btn" id="btnNeedBuy">êµ¬ë§¤</button>
          </div>
        </div>
      </div>

      <!-- ì‹¤íŒ¨ -->
      <div class="overlay" id="failOverlay">
        <div class="card">
          <div class="title">ì‹¤íŒ¨</div>
          <div class="desc">ë¹™íŒ ë°–ìœ¼ë¡œ ë–¨ì–´ì¡Œì–´ìš”.</div>
          <div class="rowBetween">
            <button class="btn ghost" id="btnFailHome">
              <span>í™ˆê°€ê¸°</span>
            </button>
            <button class="btn" id="btnFailRetry">
              <span>ë‹¤ì‹œí•˜ê¸°</span>
            </button>
          </div>
        </div>
      </div>

      <!-- ì„±ê³µ -->
      <div class="overlay" id="clearOverlay">
        <div class="card">
          <div class="title">í´ë¦¬ì–´!</div>
          <div class="desc" id="clearDesc">ë³´ìƒ: 0 ê³¨ë“œ</div>
          <div class="rowBetween">
            <button class="btn ghost" id="btnClearHome">í™ˆê°€ê¸°</button>
            <button class="btn" id="btnClearNext">ë‹¤ìŒë‹¨ê³„</button>
          </div>
        </div>
      </div>

      <!-- ë¡œë”© -->
      <div class="overlay show" id="loadingOverlay">
        <div class="card">
          <div class="title" id="loadingTitle">ë¡œë”© ì¤‘â€¦</div>
          <div class="desc" id="loadingDesc">ë¦¬ì†ŒìŠ¤ë¥¼ ì¤€ë¹„í•˜ê³  ìˆì–´ìš”</div>
        </div>
      </div>
    </div>
  </div>

  <audio id="bgm" src="./asset/bgm.mp3" loop preload="auto"></audio>
  <script src="./game.js"></script>
</div>
</body>
</html>
